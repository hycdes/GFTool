/**
 * [GF_logistics]{@link https://github.com/CHANTXU64/Girls-Frontline}
 *
 * @namespace GF_logistics
 * @author ChantXu64 [chantxu@outlook.com]
 * @copyright ChantXu64
 * @license MIT
 */

"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function stringSliceFromLast_(e,t){var a=e.lastIndexOf("_");return void 0===t?e.slice(a+1):e.slice(a+1,t)}function NumberAutoExact(e){return e>100?Math.round(e):e>10?Math.round(10*e)/10:Math.round(100*e)/100}function TimeFormat(e){var t=parseInt(e/60),a=e%60;return(a+"").length<2&&(a="0"+a),t+":"+a}function is_NonPositiveNumberOrInfinity(e){return!!(""===e||isNaN(e)||e<0||"Infinity"===e)}function getPositiveValueFromHTML(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=void 0;return a=is_NonPositiveNumberOrInfinity(e.val())?0:parseFloat(e.val()),t&&e.val(a),a}function Input_getGreatSuccessRate(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$("#GreatSuccessRate"),a=t.val();return a=is_NonPositiveNumberOrInfinity(a)||a<15?15:a>69?69:Math.round(a),e&&t.val(a),a}function Input_setGreatSuccessRate(e){$("#GreatSuccessRate").val(e),setQContract(Input_getTotalGreatSuccessRate()),storageSetItem("GreatSuccessRate",e)}function IsGreatSuccessRateUp(){return!!document.getElementById("GreatSuccessRateUp").checked}function Input_getGreatSuccessUpRate(e){return IsGreatSuccessRateUp()?parseInt(Array_GreatSuccessRate[e].substr(0,2)):0}function Input_getTotalGreatSuccessRate(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Input_getGreatSuccessRate(e);return t+Input_getGreatSuccessUpRate(t)}function Input_setGreatSuccessUpRate(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=document.getElementById("GreatSuccessRateUp"),n=document.getElementById("Display_UPRate");if(!1===e)a.checked=!1,n.innerHTML="";else{a.checked=!0;var i=Input_getGreatSuccessRate(t);n.innerHTML="+"+Array_GreatSuccessRate[i]}setQContract(Input_getTotalGreatSuccessRate()),storageSetItem("is_GreatSuccessRateUP",e)}function Input_getTarget_Correct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[$("#MT"),$("#AT"),$("#RT"),$("#PT"),$("#TT"),$("#ET"),$("#QPT"),$("#QRT")],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Array.isArray(e)?_getTarget_Arr(e,t):_getTarget_one(e,t)}function _getTarget_Arr(e,t){for(var a=[],n=0;n<e.length;n++)a.push(getPositiveValueFromHTML(e[n],t));return a}function _getTarget_one(e,t){return getPositiveValueFromHTML(e,t)}function Input_setTarget(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0,0,0,0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[$("#MT"),$("#AT"),$("#RT"),$("#PT"),$("#TT"),$("#ET"),$("#QPT"),$("#QRT")];Array.isArray(e)?_setTarget_arr(e,t):_setTarget_one(e,t),storageSetItem("TargetValue",Input_getTarget_Correct())}function _setTarget_arr(e,t){for(var a=0;a<e.length;a++)_setTarget_one(e[a],t[a])}function _setTarget_one(e,t){e<0?t.val(0):t.val(Math.round(100*e)/100)}function Input_getContractWeight(){return parseInt($("#ContractWeight").val())}function Input_setContractWeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;$("#ContractWeight").val(e);var t=Input_getContractWeight();document.getElementById("ContractWeight_range").style.right=100-t+"%",document.getElementById("ContractWeight_thumb").style.left=t+"%",storageSetItem("ContractWeight",t)}function Input_getSelectChapter(){return parseInt($("#ChapterLimit").val())}function Input_setSelectChapter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;$("#ChapterLimit").val(e),null===$("#ChapterLimit").val()&&$("#ChapterLimit").val(12),storageSetItem("SelectChapter",Input_getSelectChapter())}function Input_getAnytimeHours(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return getPositiveValueFromHTML($("#Time_Anytime_hours"),e)}function Input_getAnytimeMinutes(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return getPositiveValueFromHTML($("#Time_Anytime_minutes"),e)}function Input_getAnytimeTotalTime(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 60*Input_getAnytimeHours(e)+Input_getAnytimeMinutes(e)}function Input_setAnytimeHours(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;$("#Time_Anytime_hours").val(e)}function Input_setAnytimeMinutes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$("#Time_Anytime_minutes").val(e)}function Input_setAnytimeTotalTime(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:960,t=parseInt(e/60),a=e%60;Input_setAnytimeHours(t),Input_setAnytimeMinutes(a)}function Input_getAnytimeMinimumIntervalTime(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return getPositiveValueFromHTML($("#Tab_Anytime_MinimumIntervalTime_minutes"),e)}function Input_setAnytimeMinimumIntervalTime(e){$("#Tab_Anytime_MinimumIntervalTime_minutes").val(e)}function Input_getTimetableHours(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return getPositiveValueFromHTML($("#Time_Timetable_hours"),e)}function Input_getTimetableMinutes(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return getPositiveValueFromHTML($("#Time_Timetable_minutes"),e)}function Input_getTimetableTotalTime(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return 60*Input_getTimetableHours(e)+Input_getTimetableMinutes(e)}function Input_setTimetableHours(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;$("#Time_Timetable_hours").val(e)}function Input_setTimetableMinutes(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$("#Time_Timetable_minutes").val(e)}function Input_setTimetableTotalTime(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(document.getElementById("Tab_Timetable_range_tooltip_0_value").innerHTML=TimeFormat(e));var t=parseInt(e/60),a=e%60;Input_setTimetableHours(t),Input_setTimetableMinutes(a)}function Input_getTimetableNewHours_Correct(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=getPositiveValueFromHTML($("#Tab_Timetable_new_hours"),e);return e&&$("#Tab_Timetable_new_hours").val(""),t}function Input_getTimetableNewMinutes_Correct(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=getPositiveValueFromHTML($("#Tab_Timetable_new_minutes"),e);return e&&$("#Tab_Timetable_new_minutes").val(""),t}function Input_getTimetableNewTotalTime_Correct(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 60*Input_getTimetableNewHours_Correct(e)+Input_getTimetableNewMinutes_Correct(e)}function Input_setTimetableTimetable(e){Tab_Timetable_DeleteAllTimePoint();for(var t=0;t<e.length;t++)Tab_Timetable_AddNewTimePoint(e[t]);0===Tab_Timetable_TIMELIST.length?Tab_Timetable_InputTotalTime_enable():Tab_Timetable_InputTotalTime_disable()}function quick_sort_descending(e){var t=new Array(e.length),a=0;for(t[a++]=new Range(0,e.length-1);a;){var n=t[--a];if(!(n.start>=n.end)){for(var i=e[n.end],l=n.start,r=n.end-1;l<r;){for(;e[l]>i&&l<r;)l++;for(;e[r]<=i&&l<r;)r--;var s=[e[r],e[l]];e[l]=s[0],e[r]=s[1]}if(e[l]<=e[n.end]){var o=[e[n.end],e[l]];e[l]=o[0],e[n.end]=o[1]}else l++;t[a++]=new Range(n.start,l-1),t[a++]=new Range(l+1,n.end)}}}function quick_sort_expand_descending(e,t){var a=new Array(e.length),n=0;for(a[n++]=new Range(0,e.length-1);n;){var i=a[--n];if(!(i.start>=i.end)){for(var l=e[i.end][t],r=i.start,s=i.end-1;r<s;){for(;e[r][t]>l&&r<s;)r++;for(;e[s][t]<=l&&r<s;)s--;var o=[e[s],e[r]];e[r]=o[0],e[s]=o[1]}if(e[r][t]<=e[i.end][t]){var u=[e[i.end],e[r]];e[r]=u[0],e[i.end]=u[1]}else r++;a[n++]=new Range(i.start,r-1),a[n++]=new Range(r+1,i.end)}}}function quick_sort_expand_ascending(e,t){var a=new Array(e.length),n=0;for(a[n++]=new Range(0,e.length-1);n;){var i=a[--n];if(!(i.start>=i.end)){for(var l=e[i.end][t],r=i.start,s=i.end-1;r<s;){for(;e[r][t]<l&&r<s;)r++;for(;e[s][t]>=l&&r<s;)s--;var o=[e[s],e[r]];e[r]=o[0],e[s]=o[1]}if(e[r][t]>=e[i.end][t]){var u=[e[i.end],e[r]];e[r]=u[0],e[i.end]=u[1]}else r++;a[n++]=new Range(i.start,r-1),a[n++]=new Range(r+1,i.end)}}}function checkLocalStorageWork(){CAN_LOCALSTORAGE_WORK=_localStorageWorks(),!0!==CAN_LOCALSTORAGE_WORK?(CAN_LOCALSTORAGE_WORK=!1,document.getElementById("localstorageWarning").style.display="none",document.getElementById("neverShowAgain_description").style.display="none"):document.getElementById("localstorageDoesNotWork").style.display="none"}function _localStorageWorks(){try{localStorage.setItem("test_Dlz3bH","KwNYPCpyH7yl2S1K");var e="KwNYPCpyH7yl2S1K"==localStorage.getItem("test_Dlz3bH");return localStorage.removeItem("test_Dlz3bH"),e}catch(e){}}function storageSetItem(e,t){if(CAN_LOCALSTORAGE_WORK){var a=JSON.stringify(t);localStorage.setItem(e,a)}}function storageGetItem(e){if(CAN_LOCALSTORAGE_WORK){var t=localStorage.getItem(e);return null===t?"noStorage":JSON.parse(t)}return"noStorage"}function setPageByLocalStorage(){LS_setDescription(),LS_setLocalstorageWarning(),LS_setHTMLtab(),LS_setPerHourOrTotal(),LS_setTabAnytimeCustom(),LS_setTabTimetableCustom(),LS_setGreatSuccessRate(),LS_setGreatSuccessRateUP(),LS_setSelectChapter(),LS_setContractWeight(),LS_setTarget(),LS_setSaved(),LS_setSavedOrMissionsShow()}function LS_setDescription(){!1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("Description_Display"))&&(document.getElementById("description").style.display="none")}function LS_setLocalstorageWarning(){!1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("LocalstorageWarning_Display"))&&(document.getElementById("localstorageWarning").style.display="none")}function LS_setHTMLtab(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("HTML_TAB");"Timetable"===e?(IS_ChangeTabByJS=!0,ChangeTab(e)):(IS_ChangeTabByJS=!0,ChangeTab("Anytime"))}function LS_setPerHourOrTotal(){if("PerHour"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("PerHourOrTotal")))storageSetItem("PerHourOrTotal","PerHour"),TABLE_CALCULATE_TOTAL_TIME=60,document.getElementById("Display_PerHour").checked=!0;else{storageSetItem("PerHourOrTotal","Total");var e=getShownTab();e.setTime(),TABLE_CALCULATE_TOTAL_TIME=e.TotalTime,document.getElementById("Display_Total").checked=!0}}function LS_setTabAnytimeCustom(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("TabAnytimeCustom");if("noStorage"!==e){(new Tab_Anytime).ApplySaved_Custom(e)}}function LS_setTabTimetableCustom(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("TabTimetableCustom");if("noStorage"!==e){(new Tab_Timetable).ApplySaved_Custom(e)}}function LS_setGreatSuccessRate(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("GreatSuccessRate");"noStorage"!==e&&Input_setGreatSuccessRate(e)}function LS_setGreatSuccessRateUP(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("is_GreatSuccessRateUP");"noStorage"!==e&&Input_setGreatSuccessUpRate(e,!1)}function LS_setSelectChapter(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("SelectChapter");"noStorage"!==e&&Input_setSelectChapter(e)}function LS_setContractWeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("ContractWeight");"noStorage"!==e&&Input_setContractWeight(e)}function LS_setTarget(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("TargetValue");"noStorage"!==e&&Input_setTarget(e)}function LS_setSaved(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("SAVED");"noStorage"!==e&&Saved_importAndCover_SAVED(e)}function LS_setSavedOrMissionsShow(){!0===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:storageGetItem("IsSavedShow"))&&(0===SAVED.length?storageSetItem("IsSavedShow",!1):(document.getElementById("MissionTable_panel").style.transition="none",document.getElementById("Saved").style.transition="none",$("#Saved").collapse("show"),$("#MissionTable_panel").collapse("hide")))}function Config_export(){var e=[];e.push(HTML_TAB),is_CalculateByHour()?e.push("PerHour"):e.push("Total");var t=new Tab_Anytime;e.push(t.Saved_Custom()),t=new Tab_Timetable,e.push(t.Saved_Custom()),e.push(Input_getGreatSuccessRate()),e.push(IsGreatSuccessRateUp()),e.push(Input_getSelectChapter()),e.push(Input_getContractWeight()),e.push(Input_getTarget_Correct()),e.push(SAVED);var a=sha1(JSON.stringify(e)),n={data:[],SHA1:""};n.data=e,n.SHA1=a,prompt("export",JSON.stringify(n))}function setPageByImport(e){var t=!0;if(0!==SAVED.length&&(t=confirm(language.JS.config_alert)),!0===t){try{var a=JSON.parse(e),n=sha1(JSON.stringify(a.data)),i=n===a.SHA1}catch(e){}i?setPageByImport_main(a.data):alert(language.JS.Saved_alert)}}function setPageByImport_main(e){LS_setHTMLtab(e[0]),LS_setPerHourOrTotal(e[1]),LS_setTabAnytimeCustom(e[2]),LS_setTabTimetableCustom(e[3]),LS_setGreatSuccessRate(e[4]),LS_setGreatSuccessRateUP(e[5]),LS_setSelectChapter(e[6]),LS_setContractWeight(e[7]),LS_setTarget(e[8]),LS_setSaved(e[9]),setQContract(Input_getTotalGreatSuccessRate()),MISSION_TABLE_SELECT=[],PrintMissionTable(),PrintPlanDetails()}function loadHTML_Target(){var e="";e+='<button type="button" class="btn btn-default"id="setTarget_HG" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_SMG" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_RF" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_AR" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_MG" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_SG" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-default"id="setTarget_2221" style="margin-right: 5px; margin-bottom: 5px;"></button>',e+='<button type="button" class="btn btn-danger"id="setTarget_Clear" style="margin-right: 5px; margin-bottom: 5px;"></button>',document.getElementById("setTargetButton").innerHTML=e,e="";for(var t=["Manp","Ammu","Rati","Part","TPro","Equi","QPro","QRes"],a=["MT","AT","RT","PT","TT","ET","QPT","QRT"],n=0;n<4;n++)e+='<div class="form-group input-group"style="margin-bottom: 10px;"><span class="input-group-addon"style="padding-right:10px;padding-left:10px;"',e+="id="+t[n]+">",e+='</span><div class="input-group-btn"><button class="btn btn-default"type="button"id="Target_minus_100_'+a[n]+'"style="padding-right:10px;padding-left:10px;border-radius:0;"tabindex=-1>',e+='<b>&minus;</b></button><button class="btn btn-default"type="button"id="Target_minus_10_'+a[n]+'"style="padding-right:10px;padding-left:10px;border-radius:0;"tabindex=-1>',e+='&minus;</button></div><input type="number" pattern="d*" min="0"class="form-control"id="',e+=a[n],e+='"value=0 onclick="this.select()"style="border-left-width:0"><div class="input-group-btn"><button class="btn btn-default"type="button"id="Target_plus_10_'+a[n]+'"style="padding-right:10px;padding-left:10px;"tabindex=-1>',e+='+</button><button class="btn btn-default"type="button"id="Target_plus_100_'+a[n]+'"style="padding-right:10px;padding-left:10px;"tabindex=-1>',e+="<b>&plus;</b></button></div></div>";for(var n=4;n<8;n++)e+='<div class="form-group input-group"style="margin-bottom: 10px;"><span class="input-group-addon"style="padding-right:10px;padding-left:10px;"',e+="id="+t[n]+">",e+='</span><div class="input-group-btn"><button class="btn btn-default"id="Target_minus_1_'+a[n]+'"type="button"style="padding-right:10px;padding-left:10px;border-radius:0;"tabindex=-1>',e+='<b>&minus;</b></button><button class="btn btn-default"type="button"id="Target_minus_0.1_'+a[n]+'"style="padding-right:10px;padding-left:10px;border-radius:0;"tabindex=-1>',e+='&minus;</button></div><input type="number" pattern="d*" min="0" step="0.01" class="form-control"id="',e+=a[n],e+='"value=0 onclick="this.select()"style="border-left-width:0"><div class="input-group-btn"><button class="btn btn-default"type="button"id="Target_plus_0.1_'+a[n]+'"style="padding-right:10px;padding-left:10px;"tabindex=-1>',e+='+</button><button class="btn btn-default"type="button"id="Target_plus_1_'+a[n]+'"style="padding-right:10px;padding-left:10px;"tabindex=-1>',e+="<b>&plus;</b></button></div></div>";document.getElementById("setTargetInput").innerHTML=e}function loadHTML_language(){document.documentElement.lang=language.lang,document.title=language.title;for(var e in language.HTML)$("#"+e).html(language.HTML[e]);delete_PlanTable(),HTML_AllowInput();for(var t in language.HTMLJS.placeholder)document.getElementById(t).placeholder=language.HTMLJS.placeholder[t];for(var a in language.HTMLJS.title)document.getElementById(a).title=language.HTMLJS.title[a];$("button[id^=Tab_Timetable_range_thumb_]").attr("title",language.HTMLJS.Timetable_deletePoint),$("button[id^=SavedTable_apply_]").attr("title",language.HTMLJS.SavedTable_apply),$("input[id^=SavedTable_name_]").attr("placeholder",language.HTMLJS.SavedTable_name),$("button[id^=SavedTable_rename_]").attr("title",language.HTMLJS.SavedTable_rename),$("button[id^=SavedTable_up_]").attr("title",language.HTMLJS.SavedTable_up),$("button[id^=SavedTable_down_]").attr("title",language.HTMLJS.SavedTable_down),$("button[id^=SavedTable_export_]").attr("title",language.HTMLJS.SavedTable_export),$("button[id^=SavedTable_delete_]").attr("title",language.HTMLJS.SavedTable_delete),_PrintPlanDetails_ShownTab(),_PrintPlanDetails_TotalTime(),_PrintPlanDetails_GreatSuccessRate(),$("#PlanDetails_PerHour_title").html(language.JS.PerHour),$("#PlanDetails_Total_title").html(language.JS.Total),is_CalculateByHour()?$("#Demand").html(language.HTMLJS.Demand_hour):$("#Demand").html(language.HTMLJS.Demand_total)}function disableTargetButton(){$("button[id^=Target_plus_10_]").attr("style","display:none;"),$("button[id^=Target_plus_0]").attr("style","display:none;"),$("button[id^=Target_minus_10_]").attr("style","display:none;"),$("button[id^=Target_minus_0]").attr("style","display:none;")}function enableTargetButton(){$("button[id^=Target_plus_10_]").attr("style","padding-right:10px;padding-left:10px;border-radius:0;"),$("button[id^=Target_plus_0]").attr("style","padding-right:10px;padding-left:10px;border-radius:0;"),$("button[id^=Target_minus_10_]").attr("style","padding-right:10px;padding-left:10px;border-radius:0;"),$("button[id^=Target_minus_0]").attr("style","padding-right:10px;padding-left:10px;border-radius:0;")}function get_TABLE_CALCULATE_TOTAL_TIME(){if(is_CalculateByHour())return 60;var e=getShownTab();return e.setTime(!1),e.TotalTime}function setLanguage(){var e=storageGetItem("lang");if("noStorage"===e&&(e=navigator.language||navigator.userLanguage),"zh"===e.substr(0,2))switch(e){case"zh-HK":case"zh-TW":case"zh-MO":language=languages["zh-TW"],storageSetItem("lang","zh-TW");break;default:language=languages["zh-CN"],storageSetItem("lang","zh-CN")}else language=languages["zh-CN"],storageSetItem("lang","zh-CN")}function changeLanguage(e){switch(e){case"zh-CN":storageSetItem("lang","zh-CN"),language=languages["zh-CN"];break;case"zh-TW":storageSetItem("lang","zh-TW"),language=languages["zh-TW"]}loadHTML_language()}function IsMobile(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),a=!1,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!0;break}return a}function MobileOptimization(){IsMobile()&&(document.getElementById("Saved").style.transition="none",document.getElementById("MissionTable_panel").style.transition="none")}function ChangeTab(e){switch(e){case"Anytime":"Anytime"!==HTML_TAB&&void 0!==HTML_TAB||(IS_ChangeTabByJS=!1),$("[href=#Tab_Anytime]").tab("show");break;case"Timetable":"Timetable"!==HTML_TAB&&void 0!==HTML_TAB||(IS_ChangeTabByJS=!1),$("[href=#Tab_Timetable]").tab("show")}HTML_TAB=e,storageSetItem("HTML_TAB",HTML_TAB)}function ChangeTab_Anytime(){if(HTML_TAB="Anytime",storageSetItem("HTML_TAB",HTML_TAB),delete_PlanTable(),HTML_AllowInput(),!is_CalculateByHour()){var e=getShownTab();e.setTime(!1),TABLE_CALCULATE_TOTAL_TIME=e.TotalTime}PrintMissionTable(),PrintPlanDetails()}function ChangeTab_Timetable(){if(HTML_TAB="Timetable",storageSetItem("HTML_TAB",HTML_TAB),delete_PlanTable(),HTML_AllowInput(),!is_CalculateByHour()){var e=getShownTab();e.setTime(!1),TABLE_CALCULATE_TOTAL_TIME=e.TotalTime}PrintMissionTable(),PrintPlanDetails()}function is_CalculateByHour(){return!!document.getElementById("Display_PerHour").checked}function changeCalculateOutput_Hour(){storageSetItem("PerHourOrTotal","PerHour"),$("#Demand").html(language.HTMLJS.Demand_hour);var e=getShownTab();e.setTime(),TABLE_CALCULATE_TOTAL_TIME=60;for(var t=e.TotalTime,a=Input_getTarget_Correct(),n=0;n<8;n++)a[n]=Math.round(a[n]/t*6e3)/100;Input_setTarget(a),PrintMissionTable();var i=document.getElementById("Plan_Table").innerHTML;""!==i&&i!==language.JS.NoPlan&&print_result_plan(!1,RESULT_PLAN,TABLE_CALCULATE_TOTAL_TIME)}function changeCalculateOutput_Total(){storageSetItem("PerHourOrTotal","Total"),$("#Demand").html(language.HTMLJS.Demand_total);var e=getShownTab();e.setTime(),TABLE_CALCULATE_TOTAL_TIME=e.TotalTime;for(var t=e.TotalTime,a=Input_getTarget_Correct(),n=0;n<8;n++)a[n]=Math.round(a[n]*t*100/60)/100;Input_setTarget(a),PrintMissionTable();var i=document.getElementById("Plan_Table").innerHTML;""!==i&&i!==language.JS.NoPlan&&print_result_plan(!1,RESULT_PLAN,TABLE_CALCULATE_TOTAL_TIME)}function Tab_Timetable_AddNewTimePoint(e){Tab_Timetable_TIMELIST.push(e);var t=Input_getTimetableTotalTime(),a=e/t*100+"%";_Tab_Timetable_AddNewThumb(e,a),_Tab_Timetable_AddNewTooltip(e,a)}function _Tab_Timetable_AddNewThumb(e,t){var a='<button class="slider-button" id="Tab_Timetable_range_thumb_'+e+'"';a+='style="left:'+t+';" title="'+language.HTMLJS.Timetable_deletePoint+'">',a+='<span class="glyphicon glyphicon-remove-circle" style="font-size: 22px;"></span></button>',$("#Tab_Timetable_range").append(a)}function _Tab_Timetable_AddNewTooltip(e,t){var a='<div id="Tab_Timetable_range_tooltip_'+e+'"';Tab_Timetable_TIMELIST.indexOf(e)%2==0?(a+='class="tooltip top custom-tooltip"',a+='style="left:'+t+'; top:-32px; margin-left: -15px;">'):(a+='class="tooltip bottom custom-tooltip"',a+='style="left:'+t+'; top:12px; margin-left: -15px;">'),a+='<div class="tooltip-arrow"></div><div class="tooltip-inner">',a+=TimeFormat(e)+"</div></div>",$("#Tab_Timetable_range").append(a)}function Tab_Timetable_DeleteThisTimePoint(e){Tab_Timetable_TIMELIST.remove_First(e);var t="Tab_Timetable_range_thumb_"+e,a="Tab_Timetable_range_tooltip_"+e,n=document.getElementById(t),i=document.getElementById(a),l=document.getElementById("Tab_Timetable_range");l.removeChild(n),l.removeChild(i),0===Tab_Timetable_TIMELIST.length&&Tab_Timetable_InputTotalTime_enable()}function Tab_Timetable_DeleteAllTimePoint(){for(var e=Tab_Timetable_TIMELIST.length,t=0;t<e;t++)Tab_Timetable_DeleteThisTimePoint(Tab_Timetable_TIMELIST[0])}function Tab_Timetable_InputTotalTime_enable(){$("#Time_Timetable_hours").removeAttr("disabled"),$("#Time_Timetable_minutes").removeAttr("disabled")}function Tab_Timetable_InputTotalTime_disable(){$("#Time_Timetable_hours").attr("disabled","true"),$("#Time_Timetable_minutes").attr("disabled","true")}function setTarget(e){switch(e){case"HG":Input_setTarget([130,130,130,130,0,0,0,0]);break;case"SMG":Input_setTarget([430,430,130,230,0,0,0,0]);break;case"RF":Input_setTarget([430,130,430,230,0,0,0,0]);break;case"AR":Input_setTarget([130,430,430,130,0,0,0,0]);break;case"MG":Input_setTarget([730,630,130,430,0,0,0,0]);break;case"SG":Input_setTarget([800,200,800,400,0,0,0,0]);break;case"2221":Input_setTarget([400,400,400,200,0,0,0,0]);break;case"Clear":Input_setTarget()}}function ChangeTarget(e){var t=stringSliceFromLast_(e),a=e.indexOf(t),n=e.slice(0,a-1),i=parseFloat(stringSliceFromLast_(n));"m"===n.slice(7,8)&&(i*=-1),Input_setTarget(Input_getTarget_Correct($("#"+t),!1)+i,$("#"+t))}function HTML_DisableInput(){$("#Time_Anytime_hours").attr("disabled","true"),$("#Time_Anytime_minutes").attr("disabled","true"),$("#Tab_Anytime_MinimumIntervalTime_minutes").attr("disabled","true"),$("#Time_Timetable_hours").attr("disabled","true"),$("#Time_Timetable_minutes").attr("disabled","true"),$("#tab_Timetable_deleteall").attr("disabled","true"),$("button[id^=Tab_Timetable_range_thumb_]").attr("disabled","true"),$("#Tab_Timetable_new_hours").attr("disabled","true"),$("#Tab_Timetable_new_minutes").attr("disabled","true"),$("#Tab_Timetable_AddNewTimePoint").attr("disabled","true"),$("#GreatSuccessRate").attr("disabled","true"),$("#GreatSuccessRateUp").attr("disabled","true"),document.getElementById("GreatSuccessRateUp_text").style.cursor="not-allowed",document.getElementById("GreatSuccessRateUp_label").style.cursor="not-allowed",$("#ChapterLimit").attr("disabled","true"),$("#ContractWeight").attr("disabled","true"),document.getElementById("ContractWeight_thumb").style.backgroundColor="#CCC",$("button[id^=setTarget_]").attr("disabled","true"),$("#MT").attr("disabled","true"),$("#AT").attr("disabled","true"),$("#RT").attr("disabled","true"),$("#PT").attr("disabled","true"),$("#TT").attr("disabled","true"),$("#ET").attr("disabled","true"),$("#QPT").attr("disabled","true"),$("#QRT").attr("disabled","true"),$("button[id^=Target_minus_]").attr("disabled","true"),$("button[id^=Target_plus_]").attr("disabled","true"),$("#start_sorting").attr("disabled","true"),$("#clear_sorting").removeAttr("disabled")}function HTML_AllowInput(){$("#Time_Anytime_hours").removeAttr("disabled"),$("#Time_Anytime_minutes").removeAttr("disabled"),$("#Tab_Anytime_MinimumIntervalTime_minutes").removeAttr("disabled"),0===Tab_Timetable_TIMELIST.length&&($("#Time_Timetable_hours").removeAttr("disabled"),$("#Time_Timetable_minutes").removeAttr("disabled")),$("#tab_Timetable_deleteall").removeAttr("disabled"),$("button[id^=Tab_Timetable_range_thumb_]").removeAttr("disabled"),$("#Tab_Timetable_new_hours").removeAttr("disabled"),$("#Tab_Timetable_new_minutes").removeAttr("disabled"),$("#Tab_Timetable_AddNewTimePoint").removeAttr("disabled"),$("#GreatSuccessRate").removeAttr("disabled"),$("#GreatSuccessRateUp").removeAttr("disabled"),document.getElementById("GreatSuccessRateUp_text").style.cursor="pointer",document.getElementById("GreatSuccessRateUp_label").style.cursor="pointer",$("#ChapterLimit").removeAttr("disabled"),$("#ContractWeight").removeAttr("disabled"),document.getElementById("ContractWeight_thumb").style.backgroundColor="rgb(112, 166, 236)",$("button[id^=setTarget_]").removeAttr("disabled"),$("#MT").removeAttr("disabled"),$("#AT").removeAttr("disabled"),$("#RT").removeAttr("disabled"),$("#PT").removeAttr("disabled"),$("#TT").removeAttr("disabled"),$("#ET").removeAttr("disabled"),$("#QPT").removeAttr("disabled"),$("#QRT").removeAttr("disabled"),$("button[id^=Target_minus_]").removeAttr("disabled"),$("button[id^=Target_plus_]").removeAttr("disabled"),$("#start_sorting").removeAttr("disabled"),$("#clear_sorting").attr("disabled","true")}function resultPlan_sortByColumn(e){"ascending"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"descending")?(quick_sort_expand_ascending(RESULT_PLAN,e),print_result_plan(!1,RESULT_PLAN,TABLE_CALCULATE_TOTAL_TIME)):(quick_sort_expand_descending(RESULT_PLAN,e),print_result_plan(!1,RESULT_PLAN,TABLE_CALCULATE_TOTAL_TIME))}function delete_PlanTable(){document.getElementById("start_sorting_html").style.display="",document.getElementById("Plan_Table").innerHTML=""}function Tab_Anytime_changeStorageCustom(){storageSetItem("TabAnytimeCustom",(new Tab_Anytime).Saved_Custom())}function _Tab_Timetable_changeMaxTime(){var e=Input_getTimetableTotalTime();Input_setTimetableTotalTime(e),is_CalculateByHour()||(TABLE_CALCULATE_TOTAL_TIME=e),PrintMissionTable(),PrintPlanDetails()}function Tab_Timetable_changeStorageCustom(){storageSetItem("TabTimetableCustom",(new Tab_Timetable).Saved_Custom())}function Tab_Timetable_AddNew(){var e=Input_getTimetableNewTotalTime_Correct(),t=Input_getTimetableTotalTime();switch(!0){case 0===e:alert(language.JS.tab_Timetable_alert1);break;case e>t:alert(language.JS.tab_Timetable_alert2);break;case e===t||-1!==Tab_Timetable_TIMELIST.indexOf(e):alert(language.JS.tab_Timetable_alert3);break;default:Tab_Timetable_AddNewTimePoint(e)}0===Tab_Timetable_TIMELIST.length?Tab_Timetable_InputTotalTime_enable():Tab_Timetable_InputTotalTime_disable(),PrintMissionTable(),PrintPlanDetails(),Tab_Timetable_changeStorageCustom()}function TargetChangeStorage(){storageSetItem("TargetValue",Input_getTarget_Correct())}function _PlanSort(e){var t=parseInt(stringSliceFromLast_(e.id));if("success"!=e.className){for(var a=0;a<RESULT_PLAN.length;a++)document.getElementById("print_result_plan_tr_"+a).className="";e.className="success",MissionTable_resultPlan_select(t)}else e.className=""}function MissionTable_clickThisRow(e){var t=parseInt(stringSliceFromLast_(e.id));"success"===e.className?MissionTable_cancelSelectThisRow(t):MissionTable_selectThisRow(t)}function setQContract(e){var t=e/100;Q[1][5]=calculateContractValue(50,50,t),Q[7][5]=calculateContractValue(20,20,t),Q[11][5]=calculateContractValue(80,80,t),Q[15][5]=calculateContractValue(40,80,t),Q[18][5]=.7,Q[23][5]=calculateContractValue(40,40,t),Q[29][5]=.6,Q[35][5]=calculateContractValue(90,90,t),Q[38][5]=calculateContractValue(70,70,t),Q[41][5]=.75,Q[44][5]=.5,Q[45][5]=1,Q[51][5]=1,Q[2][6]=calculateContractValue(40,80,t),Q[15][6]=calculateContractValue(40,80,t),Q[16][6]=calculateContractValue(20,20,t),Q[22][6]=calculateContractValue(50,50,t),Q[26][6]=calculateContractValue(60,60,t),Q[30][6]=calculateContractValue(70,70,t),Q[32][6]=calculateContractValue(40,40,t),Q[39][6]=1,Q[43][6]=calculateContractValue(50,50,t),Q[44][6]=.5,Q[48][6]=calculateContractValue(60,60,t),Q[0][7]=calculateContractValue(20,70,t),Q[10][7]=.5,Q[14][7]=calculateContractValue(40,85,t),Q[17][7]=calculateContractValue(50,50,t),Q[19][7]=1,Q[25][7]=calculateContractValue(20,70,t),Q[31][7]=calculateContractValue(80,80,t),Q[34][7]=calculateContractValue(60,90,t),Q[37][7]=calculateContractValue(25,25,t),Q[41][7]=.25,Q[42][7]=calculateContractValue(30,80,t),Q[47][7]=1,Q[50][7]=1,Q[0][8]=calculateContractValue(50,70,t),Q[2][8]=calculateContractValue(40,80,t),Q[6][8]=calculateContractValue(60,60,t),Q[9][8]=calculateContractValue(30,30,t),Q[10][8]=.5,Q[14][8]=calculateContractValue(45,85,t),Q[18][8]=.3,Q[21][8]=calculateContractValue(80,80,t),Q[25][8]=calculateContractValue(50,70,t),Q[29][8]=.4,Q[33][8]=calculateContractValue(80,80,t),Q[34][8]=calculateContractValue(30,90,t),Q[42][8]=calculateContractValue(50,80,t),Q[46][8]=calculateContractValue(50,50,t)}function calculateContractValue(e,t,a){return e/100+(e/t-e/100)*a}function _setUnableLogistic(){var e;switch(Input_getSelectChapter()){case 6:e=["7-1","7-2","7-3","7-4","8-1","8-2","8-3","8-4","9-1","9-2","9-3","9-4","10-1","10-2","10-3","10-4","11-1","11-2","11-3","11-4","12-1","12-2","12-3","12-4"];break;case 7:e=["8-1","8-2","8-3","8-4","9-1","9-2","9-3","9-4","10-1","10-2","10-3","10-4","11-1","11-2","11-3","11-4","12-1","12-2","12-3","12-4"];break;case 8:e=["9-1","9-2","9-3","9-4","10-1","10-2","10-3","10-4","11-1","11-2","11-3","11-4","12-1","12-2","12-3","12-4"];break;case 9:e=["10-1","10-2","10-3","10-4","11-1","11-2","11-3","11-4","12-1","12-2","12-3","12-4"];break;case 10:e=["11-1","11-2","11-3","11-4","12-1","12-2","12-3","12-4"];break;case 11:e=["12-1","12-2","12-3","12-4"];break;case 12:e=[];break;default:e=[]}for(var t=[],a=0;a<Q.length;a++)-1!=e.indexOf(Q[a][0])&&t.push(a);return t}function sortNumber(e,t){return e-t}function sortStringNumber(e,t){var a,n;return a=parseInt(e.replace(/[^0-9]/gi,"")),n=parseInt(t.replace(/[^0-9]/gi,"")),a-n}function print_result_plan(e,t,a){var n=document.activeElement.id,i=document.getElementById("Plan_Table"),l=getHTMLFineTuningTool();l+='<div class="table-responsive">',l+='<table class="table table-striped table-hover table-responsive text-nowrap" style="margin-bottom: 0px; cursor: default;">',l+=getShownTab().PrintPlanTableTitle()+"<tbody>";var r,s;4===MISSION_TABLE_SELECT.length?(r=!0,s=MISSION_TABLE_SELECT.slice(),s.sort(sortStringNumber)):r=!1;for(var o=0;o<t.length;o++){r&&t[o][1]===s[0]&&t[o][2]===s[1]&&t[o][3]===s[2]&&t[o][4]===s[3]?l+="<tr tabindex='0' id='print_result_plan_tr_"+o+"' class='success'>":l+="<tr tabindex='0' id='print_result_plan_tr_"+o+"'>";for(var u=0;u<4;u++)l+="<td style='text-align: center'>",l+=""+t[o][u+1],l+="</td>";for(var u=4;u<8;u++)l+="<td style='text-align: center'>",l+=""+Math.round(t[o][u+1]*a*10)/10,l+="</td>";for(var u=8;u<12;u++)l+="<td style='text-align: center'>",l+=""+Math.round(t[o][u+1]*a*100)/100,l+="</td>";for(var _=t[0].length,u=13;u<_;u++)l+="<td style='text-align: center'>",l+=t[o][u],l+="</td>";l+="</tr>"}l+="</tbody>",i.innerHTML=l,e&&(document.getElementById("FineTuningTool").style.transition="none",$("#FineTuningTool").collapse("show")),IsMobile()&&(document.getElementById("FineTuningTool").style.transition="none"),document.getElementById("start_sorting_html").style.display="none",""!==n&&document.getElementById(n).focus()}function start_sorting_main(){HTML_DisableInput();var e=getShownTab();e.setTime();var t=e.setValidQAndReturnLengthAndSetCurrentMax(),a=new Plan(e,8);if(t>38){for(var n=0;n<t-3;n++)for(var i=n+1;i<t-2;i++)for(var l=i+1;l<t-1;l++)for(var r=l+1;r<t;r++)a.CalculateAndPush_Standardization_And_CalculateMissionsValue([n,i,l,r]);for(var s=new Array(t),o=0;o<t;o++)s[o]=[o,e.Qvalid[o][11]];quick_sort_expand_descending(s,1),s.splice(0,38),quick_sort_expand_descending(s,0);for(var o=0;o<s.length;o++)e.Qvalid.splice(s[o][0],1),t--}else for(var n=0;n<t-3;n++)for(var i=n+1;i<t-2;i++)for(var l=i+1;l<t-1;l++)for(var r=l+1;r<t;r++)a.CalculateAndPush_Standardization([n,i,l,r]);for(var u=CorrectTargetValueByPlanList(a),o=0;o<8;o++)u[o]/=e.CurrentValue_MAX[o];setFineTuning_TargetValue(u),setFineTuning_ShownTab(e),e.normalizedQValid(),a=new Plan(e,16,u);for(var n=0;n<t-3;n++)for(var i=n+1;i<t-2;i++)for(var l=i+1;l<t-1;l++)for(var r=l+1;r<t;r++)a.CalculateAndPush([n,i,l,r]);a.print(!1)}function getShownTab(){var e;switch(HTML_TAB){case"Anytime":e=new Tab_Anytime;break;case"Timetable":e=new Tab_Timetable}return e}function CorrectTargetValueByPlanList(e){var t=getTargetByList(e.List),a=t.slice(0,4);a.class="Resource";var n=t.slice(4,8);n.class="Contract";for(var i=getCalibration(a,e),l=getCalibration(n,e),r=0;r<4;r++)t[r]=0!=i?e.TargetValue_html[r]/i:0;for(var r=4;r<8;r++)t[r]=0!=l?e.TargetValue_html[r]/l:0;return t}function getTargetByList(e){var t=new Array(8);t.fill(0);var a=new Array(8);a.fill(e.length);for(var n=0;n<8;n++)for(var i=0;i<e.length;i++)t[n]+=e[i][n+4],0==e[i][n+4]&&a[n]--;for(var n=0;n<8;n++)0==a[n]?t[n]=0:t[n]/=a[n];return t}function getCalibration(e,t){for(var a=getTarget0html(e.class,t),n=getCurrent0MAX(e.class,t),i=0,l=e.length,r=0;r<e.length;r++)0!==e[r]?(i+=a[r]/e[r],0===a[r]&&l--):l--;if(0!==i)i/=l;else{for(var s=0,l=e.length,o=0;o<e.length;o++)0!==n[o]?s+=n[o]:l--;0===l?s=0:s/=l;i=ArrayMax(a)/s}return i}function getTarget0html(e,t){new Array(4);return"Resource"===e?t.TargetValue_html.slice(0,4):t.TargetValue_html.slice(4,8)}function getCurrent0MAX(e,t){new Array(4);return"Resource"===e?t.CurrentValue_MAX.slice(0,4):t.CurrentValue_MAX.slice(4,8)}function ArrayMax(e){for(var t=0,a=0;a<e.length;a++)t=Math.max(t,e[a]);return t}function Value2(e,t){for(var a=0,n=99999999999,i=0;i<8;i++)0!=e[i]&&(n=Math.min(n,t[i]/e[i]));for(var i=0;i<8;i++)a+=Value_2(e[i],t[i],n);return a}function Value_2(e,t,a){return 0===e?0:Math.min(t,1.5*e*a)+.5*(Math.min(t,e)-Math.min(t,1.5*e*a))}function setFineTuning_TargetValue(e){for(var t=0;t<8;t++)FineTuning_TargetValue_Original[t]=e[t],FineTuning_TargetValue[t]=e[t]}function setFineTuning_ShownTab(e){FineTuning_ShownTab=e}function getHTMLFineTuningTool(){var e=["MT","AT","RT","PT","TT","ET","QPT","QRT"],t=language.JS,a=[t.Manp,t.Ammu,t.Rati,t.Part,t.TPro,t.Equi,t.QPro,t.QRes],n='<div class="panel panel-default" style="margin-bottom:5px">';n+='<div class="panel-heading">',n+='<h4 class="panel-title"><a data-toggle="collapse" href="#FineTuningTool" class="collapsed">'+t.FineTuningTool+"</a></h4></div>",n+='<div id="FineTuningTool" class="panel-collapse collapse">',n+='<div class="panel-body">';for(var i=0;i<8;i++)0===i&&(n+='<div class="col-lg-6 col-md-6 col-sm-6">'),4===i&&(n+='</div> <div class="col-lg-6 col-md-6 col-sm-6">'),n+='<div class="form-group input-group" style="margin-bottom: 10px;">',n+='<span class="input-group-addon" id="FineTuningTool_'+e[i]+'">'+a[i]+"</span>",n+='<div class="input-group-btn">',n+='<button class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" type="button" id="FineTuning_minus_'+e[i]+'"',0===FineTuning_TargetValue_Original[i]?n+='disabled="disabled"':FineTuning_TargetValue[i]-FineTuning_TargetValue_Original[i]/50<=0?n+='disabled="disabled"':FineTuning_TargetValue[i]-FineTuning_TargetValue_Original[i]/50<.9*FineTuning_TargetValue_Original[i]&&(n+='disabled="disabled"'),n+='title="'+language.HTMLJS.FineTuning_minus+'"><b>-</b></button>',n+='<button class="btn btn-default col-lg-6 col-md-6 col-sm-6 col-xs-6" type="button" id="FineTuning_plus_'+e[i]+'"',0===FineTuning_TargetValue_Original[i]?n+='disabled="disabled"':FineTuning_TargetValue[i]+FineTuning_TargetValue_Original[i]/50>=1?n+='disabled="disabled"':FineTuning_TargetValue[i]-FineTuning_TargetValue_Original[i]/50>1.14*FineTuning_TargetValue_Original[i]&&(n+='disabled="disabled"'),n+='title="'+language.HTMLJS.FineTuning_plus+'"><b>+</b></button>',n+="</div></div>";return n+="</div></div></div></div>"}function FineTuning(e,t){var a=["MT","AT","RT","PT","TT","ET","QPT","QRT"],n=a.indexOf(t);-1===e?FineTuning_TargetValue[n]-=FineTuning_TargetValue_Original[n]/50:FineTuning_TargetValue[n]+=FineTuning_TargetValue_Original[n]/50,FineTuning_main()}function FineTuning_main(){for(var e=new Plan(FineTuning_ShownTab,16,FineTuning_TargetValue),t=FineTuning_ShownTab.Qvalid.length,a=t-3,n=t-2,i=t-1,l=t,r=0;r<a;r++)for(var s=r+1;s<n;s++)for(var o=s+1;o<i;o++)for(var u=o+1;u<l;u++)e.CalculateAndPush([r,s,o,u]);e.print(!0,RESULT_PLAN_SORT_BY)}function PrintMissionTable(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(MISSION_TABLE=_getMissionTableByShownTab());for(var e=MISSION_TABLE,t=TABLE_CALCULATE_TOTAL_TIME,a="",n=e.length,i=MISSION_TABLE_SELECT.slice(),l=0;l<n;l++){a+='<tr id="MissionTable_'+l+'" tabindex="0"';for(var r=0;r<i.length;r++)if(i[r]===e[l][0]){i.splice(r,1),a+='class="success"';break}a+='><td style="width: 10%;">'+e[l][0]+"</td>";for(var r=1;r<9;r++)a+='<td style="width: 10%;">'+NumberAutoExact(e[l][r]*t)+"</td>";a+='<td style="width: 10%;">'+TimeFormat(e[l][9])+"</td>",a+="<tr>"}for(var l=0;l<i.length;l++)MISSION_TABLE_SELECT.remove_First(i[l]);0===n&&(a="<tr><td>"+language.JS.NoMission+"</td></tr>"),document.getElementById("MissionTable_tbody").innerHTML=a}function _getMissionTableByShownTab(){var e=getShownTab();e.setTime(!1),e.setValidQAndReturnLengthAndSetCurrentMax();for(var t=e.Qvalid,a=t.length,n=0;n<a;n++){var i=t[n][0],l=i.indexOf("-"),r=i.slice(0,l),s=i.slice(l+1),o=4*parseInt(r)+parseInt(s);t[n].push(o)}quick_sort_expand_ascending(t,12);for(var u=Input_getTotalGreatSuccessRate(),_=1+u/200,n=0;n<a;n++)t[n][1]*=_,t[n][2]*=_,t[n][3]*=_,t[n][4]*=_;return t}function MissionTable_resultPlan_select(e){for(var t=MISSION_TABLE.length,a=MISSION_TABLE,n=0;n<t;n++)document.getElementById("MissionTable_"+n).className="";for(var i=[],n=0;n<4;n++)i.push(RESULT_PLAN[e][n+1]);MISSION_TABLE_SELECT=i,PrintPlanDetails();for(var n=0;n<4;n++)for(var l=0;l<t;l++)if(a[l][0]===i[n]){document.getElementById("MissionTable_"+l).className="success";break}}function MissionTable_selectThisRow(e){if(4===MISSION_TABLE_SELECT.length){var t=MISSION_TABLE_SELECT[0];MISSION_TABLE_SELECT.shift();for(var a,n=0;n<MISSION_TABLE.length;n++)if(t===MISSION_TABLE[n][0]){a=n;break}document.getElementById("MissionTable_"+a).className=""}var i=MISSION_TABLE[e][0];MISSION_TABLE_SELECT.push(i),document.getElementById("MissionTable_"+e).className="success",PrintPlanDetails()}function MissionTable_cancelSelectThisRow(e){var t=MISSION_TABLE[e][0],a=MISSION_TABLE_SELECT.indexOf(t);MISSION_TABLE_SELECT.splice(a,1),document.getElementById("MissionTable_"+e).className="",PrintPlanDetails()}function PrintPlanDetails(){if(_PrintPlanDetails_ShownTab(),_PrintPlanDetails_TotalTime(),_PrintPlanDetails_GreatSuccessRate(),document.getElementById("PlanDetails_Mission_1").innerHTML="",document.getElementById("PlanDetails_Mission_2").innerHTML="",document.getElementById("PlanDetails_Mission_3").innerHTML="",document.getElementById("PlanDetails_Mission_4").innerHTML="",document.getElementById("PlanDetails_PerHour").innerHTML="",document.getElementById("PlanDetails_Total").innerHTML="",Chart=echarts.init(document.getElementById("PlanDetails_Chart")),Chart.dispose(),0!==MISSION_TABLE_SELECT.length){var e=MISSION_TABLE_SELECT.slice(),t=MISSION_TABLE;e=e.sort(sortStringNumber);var a=new Array(8);a.fill(0);for(var n="<td style='text-align:center;'>",i=[],l=["#C5D8FF","#FFBFBE","#B6F4B5","#FFEBC7"],r=0;r<e.length;r++){for(var s,o=0;o<t.length;o++)if(e[r]===t[o][0]){s=o;break}i.push(t[s]);var u="";u+=n+t[s][0]+"</td>";for(var o=1;o<9;o++)u+=n,u+=NumberAutoExact(60*t[s][o]),a[o-1]+=t[s][o],u+="</td>";u+=n+TimeFormat(t[s][9])+"</td>",document.getElementById("PlanDetails_Mission_"+(r+1)).innerHTML=u,document.getElementById("PlanDetails_Mission_"+(r+1)).style.backgroundColor=l[r]}var u="";u+="<td style='text-align:center;'id='PlanDetails_PerHour_title'>"+language.JS.PerHour+"</td>";for(var r=0;r<8;r++)u+=n,u+=NumberAutoExact(60*a[r]),u+="</td>";u+="Anytime"!==HTML_TAB?"<td></td>":"<td>"+language.JS.MinIntervalTime+"</td>",document.getElementById("PlanDetails_PerHour").innerHTML=u;var _=getShownTab();_.setTime(!1);var T=_.TotalTime;u="<td style='text-align:center;'id='PlanDetails_Total_title'>"+language.JS.Total+"</td>";for(var r=0;r<8;r++)u+=n,u+=NumberAutoExact(a[r]*T),u+="</td>";if("Anytime"!==HTML_TAB)u+="<td></td>";else{for(var c=[],r=0;r<MISSION_TABLE_SELECT.length;r++)for(var o=0;o<MISSION_TABLE.length;o++)if(MISSION_TABLE_SELECT[r]===MISSION_TABLE[o][0]){c.push(MISSION_TABLE[o][10]);break}quick_sort_expand_ascending(c,0);for(var r=c.length;r<4;r++)c.push([c[0][c[0].length-1]]);u+="<td>"+TimeFormat((new Tab_Anytime)._calculateIntervalTimeMin(c))+"</td>"}document.getElementById("PlanDetails_Total").innerHTML=u,print_chart(i,T)}}function _PrintPlanDetails_ShownTab(){var e;switch(HTML_TAB){case"Anytime":e=language.HTML.Tab_Anytime_name;break;case"Timetable":e=language.HTML.Tab_Timetable_name}document.getElementById("PlanDetails_ShownTab").innerHTML=language.JS.PlanDetails_calculateMethod+": "+e}function _PrintPlanDetails_TotalTime(){var e=getShownTab();e.setTime(!1);var t=e.TotalTime;document.getElementById("PlanDetails_TotalTime").innerHTML=language.JS.total_time+": "+TimeFormat(t)}function _PrintPlanDetails_GreatSuccessRate(){var e=Input_getTotalGreatSuccessRate();document.getElementById("PlanDetails_GreatSuccessRate").innerHTML=language.JS.total_greatSuccessRate+": "+e+"%"}function print_chart(e,t){Chart=echarts.init(document.getElementById("PlanDetails_Chart"));for(var a=[],n=[],i=[],l=[],r=[],s=["#A1C0FF","#FF8C8A","#75d874","#FFDA93"],o=e.length-1;o>=0;o--)a.push(e[o][0]),n.push(e[o][9]),i.push(e[o][10]),l.push(e[o][10].length),r.push({name:e[o][0],color:s[o]});var u=[],_=["0","1","2","3"];echarts.util.each(_,function(e,t){for(var a,s=0;s<l[e];s++){var o=r[e],_=n[e];u.push({name:o.name,value:[t,a=i[e][s]-_,a+=_-1,_-1],itemStyle:{normal:{color:o.color}}}),u.push({name:"none",value:[t,a=i[e][s]-1,a+=1,1],itemStyle:{normal:{color:"#000000"}}})}});var T={title:{show:!1},grid:{left:35,right:20,top:5,bottom:20,height:"auto"},xAxis:{min:0,scale:!0,axisLabel:{formatter:function(e){return TimeFormat(e)}},max:t,interval:60},yAxis:{data:a},series:[{type:"custom",renderItem:renderItem,itemStyle:{normal:{opacity:.8}},encode:{x:[1,2],y:0},data:u}],animation:!1,backgroundColor:"#FFFFFF"};Chart.setOption(T)}function renderItem(e,t){var a=t.value(0),n=t.coord([t.value(1),a]),i=t.coord([t.value(2),a]),l=.5*t.size([0,1])[1],r=echarts.graphic.clipRectByRect({x:n[0],y:n[1]-l/2,width:i[0]-n[0],height:l},{x:e.coordSys.x,y:e.coordSys.y,width:e.coordSys.width,height:e.coordSys.height});return r&&{type:"rect",shape:r,style:t.style()}}function saveThisPlan(){var e=prompt(language.JS.plzInputPlanName,language.JS.planDefaultName);if(null!=e){""==e&&(e=language.JS.planDefaultName);var t=Input_getGreatSuccessRate(),a=IsGreatSuccessRateUp(),n=Input_getSelectChapter(),i=[],l=getShownTab(),r=l.Saved_Custom(),s=MISSION_TABLE_SELECT.slice();i.push(e),i.push(HTML_TAB),i.push(t),i.push(a),i.push(n),i.push(r),i.push(s);var o={data:[],MD5:""};o.data=i,o.MD5=md5(JSON.stringify(i)),SAVED.push(o),storageSetItem("SAVED",SAVED),PrintSavedThisRow(SAVED.length-1)}}function PrintSavedThisRow(e){0===e&&(document.getElementById("NoSaved").style.display="none");var t="";t+='<tr id="SavedTable_row_'+e+'"',t+='><td><button type="button" class="btn btn-default"id="SavedTable_apply_'+e+'" title="'+language.HTMLJS.SavedTable_apply+'" style="background-color: #88E063;">',t+='<span class="glyphicon glyphicon-ok"style="top: 2px;" /></button></td><td><div class="form-group input-group" style="margin-bottom: 0px;">',t+='<input type="text" class="form-control" style="min-width: 140px;"id="SavedTable_name_'+e+'" placeholder="'+language.HTMLJS.SavedTable_name+'"',t+='value="'+SAVED[e].data[0]+'"readonly="readonly">',t+='<div class="input-group-btn"><button type="button" class="btn btn-default"id="SavedTable_rename_'+e+'" title="'+language.HTMLJS.SavedTable_rename+'"><span class="glyphicon glyphicon-pencil"style="top: 2px;" /></button></div>',t+="</div></td>",t+='<td><div class="btn-group" style="min-width: 80px;"><button type="button" class="btn btn-default"id="SavedTable_up_'+e+'"" title="'+language.HTMLJS.SavedTable_up+'"',0===e&&(t+='disabled="disabled"'),t+=">",t+='<span class="glyphicon glyphicon-arrow-up"style="top: 2px;" /></button>',t+='<button type="button" class="btn btn-default"id="SavedTable_down_'+e+'" title="'+language.HTMLJS.SavedTable_down+'"',e===SAVED.length-1&&(t+='disabled="disabled"'),t+='><span class="glyphicon glyphicon-arrow-down"style="top: 2px;" /></button></div></td>',t+='<td><button type="button" class="btn btn-default"id="SavedTable_export_'+e+'" title="'+language.HTMLJS.SavedTable_export+'"><span class="glyphicon glyphicon-export"style="top: 2px;" /></button></td>',t+='<td><button type="button" class="btn btn-default"id="SavedTable_delete_'+e+'" title="'+language.HTMLJS.SavedTable_delete+'" style="background-color: #F48380;"><span class="glyphicon glyphicon-trash"style="top: 2px;" /></button></td></tr>',$("#Saved_Body").append(t),0!==e&&$("#SavedTable_down_"+(e-1)).removeAttr("disabled")}function Saved_apply(e){var t=SAVED[e].data,a=t[1];IS_ChangeTabByJS=!0,ChangeTab(a),Input_setGreatSuccessRate(t[2]),Input_setGreatSuccessUpRate(t[3]),Input_setSelectChapter(t[4]);var n=getShownTab();n.ApplySaved_Custom(t[5]),MISSION_TABLE_SELECT=t[6].slice(),delete_PlanTable(),HTML_AllowInput(),is_CalculateByHour()||(n.setTime(!1),TABLE_CALCULATE_TOTAL_TIME=n.TotalTime),PrintMissionTable(),PrintPlanDetails()}function Saved_rename(e){var t="#SavedTable_name_"+e,a=$(t),n=a.val();SAVED[e].data[0]=n,SAVED[e].MD5=md5(JSON.stringify(SAVED[e].data)),storageSetItem("SAVED",SAVED)}function Saved_upThisRow(e){$("#SavedTable_name_"+e).val(SAVED[e-1].data[0]),$("#SavedTable_name_"+(e-1)).val(SAVED[e].data[0]);var t=[SAVED[e-1],SAVED[e]];SAVED[e]=t[0],SAVED[e-1]=t[1],storageSetItem("SAVED",SAVED)}function Saved_downThisRow(e){$("#SavedTable_name_"+e).val(SAVED[e+1].data[0]),$("#SavedTable_name_"+(e+1)).val(SAVED[e].data[0]);var t=[SAVED[e+1],SAVED[e]];SAVED[e]=t[0],SAVED[e+1]=t[1],storageSetItem("SAVED",SAVED)}function Saved_export(e){var t=JSON.stringify(SAVED[e]);prompt("export",t)}function Saved_deleteThisRow(e){var t=!0;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])var a=SAVED[e].data[0],n=language.JS.deleteSavedWarning_1+'"'+a+'"'+language.JS.deleteSavedWarning_2,t=confirm(n);if(t){for(var i=e;i<SAVED.length-1;i++)$("#SavedTable_name_"+i).val(SAVED[i+1].data[0]);var l=document.getElementById("SavedTable_row_"+(SAVED.length-1));document.getElementById("Saved_Body").removeChild(l),SAVED.splice(e,1),storageSetItem("SAVED",SAVED),0!==SAVED.length?($("#SavedTable_up_0").attr("disabled","true"),$("#SavedTable_down_"+(SAVED.length-1)).attr("disabled","true")):document.getElementById("NoSaved").style.display=""}}function Saved_import(e){try{var t=JSON.parse(e),a=md5(JSON.stringify(t.data)),n=a===t.MD5}catch(e){}n?(SAVED.push(t),storageSetItem("SAVED",SAVED),PrintSavedThisRow(SAVED.length-1)):alert(language.JS.Saved_alert)}function Saved_importAndCover_SAVED(e){for(;0!==SAVED.length;)Saved_deleteThisRow(0,!1);for(var t=0;t<e.length;t++){if(md5(JSON.stringify(e[t].data))!==e[t].MD5)return!1;SAVED.push(e[t]),storageSetItem("SAVED",SAVED),PrintSavedThisRow(SAVED.length-1)}return!0}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();Array.prototype.remove=function(e){for(var t=0;t<this.length;)this[t]===e?this.splice(t,1):t++},Array.prototype.remove_First=function(e){for(var t=0;t<this.length;){if(this[t]===e){this.splice(t,1);break}t++}};var Array_GreatSuccessRate=["15","15","15","15","15","15","15","15","15","15","15","15","15","15","15","15 / 16","15 / 16","16","16","16 / 17","17","17 / 18","17 / 18","17 / 18","18 / 19","18 / 19","19","19","19 / 20","20","20 / 21","20 / 21","20 / 21","21 / 22","21 / 22","22","22","22 / 23","23","23 / 24","23 / 24","23 / 24","24 / 25","24 / 25","25","25","25 / 26","26","26 / 27","26 / 27","26 / 27","27 / 28","27 / 28","28","28","28 / 29","29","29 / 30","29 / 30","29 / 30","30 / 31","30 / 31","31","31","31 / 21","32","32 / 33","32 / 33","32","31"],Range=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,e),this.start=t,this.end=a},language,languages={"zh-CN":{lang:"zh-Hans",title:"-",HTML:{header:"",Config_text:"",description_text:"",neverShowAgain_description:"[&times;]<u></u>",localstorageDoesNotWork:"Web",localstorageWarning_text:"Web",neverShowAgain_localstorageWarning:"[&times;]<u></u>",setting:"",Tab_Anytime_name:"",Tab_Timetable_name:"",tab_Anytime_time:"",tab_Anytime_hour:"",tab_Anytime_minute:"",tab_Anytime_MinimumIntervalTime:"",tab_Anytime_MinimumIntervalTime_minute:"",tab_Timetable_time:"",tab_Timetable_hour:"",tab_Timetable_minute:"",tab_Timetable_addtimeh5:":",tab_Timetable_new_hour:"",tab_Timetable_new_minute:"",h4GreatSuccessRate:"",GreatSuccessRateUp_text:"UP",h4ChapterLimit:"",chapter6:"",chapter7:"",chapter8:"",chapter9:"",chapter10:"",chapter11:"",chapter12:"",Display_PerHour_text:"",Display_Total_text:"",ContractWeight_notImportant:"",ContractWeight_Important:"",start_sorting:"",clear_sorting:"",result:"",Manp:"",Ammu:"",Rati:"",Part:"",TPro:"",Equi:"",QPro:"",QRes:"",setTarget_HG:"HG",setTarget_SMG:"SMG",setTarget_RF:"RF",setTarget_AR:"AR",setTarget_MG:"MG",setTarget_SG:"SG",setTarget_2221:"",setTarget_Clear:"",MissionTableTitle:"",MissionTable_head_Mission:"",MissionTable_head_Manp:"",MissionTable_head_Ammu:"",MissionTable_head_Rati:"",MissionTable_head_Part:"",MissionTable_head_TPro:"",MissionTable_head_Equi:"",MissionTable_head_QPro:"",MissionTable_head_QRes:"",MissionTable_head_Time:"",PlanDetailsTitle:"",PlanDetails_Mission:"",PlanDetails_Manp:"",PlanDetails_Ammu:"",PlanDetails_Rati:"",PlanDetails_Part:"",PlanDetails_TPro:"",PlanDetails_Equi:"",PlanDetails_QPro:"",PlanDetails_QRes:"",PlanDetails_Time:"",savePlan:"",Capture:"",Saved_Title:"",NoSaved:"",start_sorting_html:' <span style="color:#165399"></span> ',permanentAddress:""},HTMLJS:{placeholder:{Config_importInput:"",Time_Anytime_hours:"",Time_Anytime_minutes:"",Tab_Anytime_MinimumIntervalTime_minutes:"",Time_Timetable_hours:"",Time_Timetable_minutes:"",Tab_Timetable_new_hours:"",Tab_Timetable_new_minutes:"",GreatSuccessRate:"",MT:"",AT:"",RT:"",PT:"",TT:"",ET:"",QPT:"",QRT:"",importSaved_input:""},title:{Config_importButton:"",Config_export:"",tab_Timetable_deleteall:"",Tab_Timetable_AddNewTimePoint:"",ChapterLimit:"",ContractWeight:"",Target_minus_100_MT:"100",Target_minus_10_MT:"10",Target_plus_10_MT:"10",Target_plus_100_MT:"100",Target_minus_100_AT:"100",Target_minus_10_AT:"10",Target_plus_10_AT:"10",Target_plus_100_AT:"100",Target_minus_100_RT:"100",Target_minus_10_RT:"10",Target_plus_10_RT:"10",Target_plus_100_RT:"100",Target_minus_100_PT:"100",Target_minus_10_PT:"10",Target_plus_10_PT:"10",Target_plus_100_PT:"100",Target_minus_1_TT:"1","Target_minus_0.1_TT":"0.1","Target_plus_0.1_TT":"0.1",Target_plus_1_TT:"1",Target_minus_1_ET:"1","Target_minus_0.1_ET":"0.1","Target_plus_0.1_ET":"0.1",Target_plus_1_ET:"1",Target_minus_1_QPT:"1","Target_minus_0.1_QPT":"0.1","Target_plus_0.1_QPT":"0.1",Target_plus_1_QPT:"1",Target_minus_1_QRT:"1","Target_minus_0.1_QRT":"0.1","Target_plus_0.1_QRT":"0.1",Target_plus_1_QRT:"1",importSaved_importButton:""},Demand_hour:"",Demand_total:"",Timetable_deletePoint:"",SavedTable_apply:"",SavedTable_name:"",SavedTable_rename:"",SavedTable_up:"",SavedTable_down:"",SavedTable_export:"",SavedTable_delete:"",FineTuning_minus:"",FineTuning_plus:""},JS:{Manp:"",Ammu:"",Rati:"",Part:"",TPro:"",Equi:"",QPro:"",QRes:"",FineTuningTool:"",TargetValue0_alert:"0",tab_Anytime_alert1:"0",tab_Timetable_alert1:"",tab_Timetable_alert2:"",tab_Timetable_alert3:"",tab_Timetable_alert4:"0",Mission:"",MinIntervalTime:"",NoPlan:"",NoMission:"",Time:"",PlanDetails_calculateMethod:"",total_time:"",total_greatSuccessRate:"",PerHour:"/h",Total:"",plzInputPlanName:"",planDefaultName:"",deleteSavedWarning_1:"",deleteSavedWarning_2:"",Saved_alert:"",config_alert:""}},"zh-TW":{lang:"zh-Hant",title:"-",HTML:{header:"",Config_text:"",description_text:"",neverShowAgain_description:"[&times;]<u></u>",localstorageDoesNotWork:"Web",localstorageWarning_text:"Web",neverShowAgain_localstorageWarning:"[&times;]<u></u>",setting:"",Tab_Anytime_name:"",Tab_Timetable_name:"",tab_Anytime_time:"",tab_Anytime_hour:"",tab_Anytime_minute:"",tab_Anytime_MinimumIntervalTime:"",tab_Anytime_MinimumIntervalTime_minute:"",tab_Timetable_time:"",tab_Timetable_hour:"",tab_Timetable_minute:"",tab_Timetable_addtimeh5:":",tab_Timetable_new_hour:"",tab_Timetable_new_minute:"",h4GreatSuccessRate:"",GreatSuccessRateUp_text:"UP",h4ChapterLimit:"",chapter6:"",chapter7:"",chapter8:"",chapter9:"",chapter10:"",chapter11:"",chapter12:"",Display_PerHour_text:"",Display_Total_text:"",ContractWeight_notImportant:"",ContractWeight_Important:"",start_sorting:"",clear_sorting:"",result:"",Manp:"",Ammu:"",Rati:"",Part:"",TPro:"",Equi:"",QPro:"",QRes:"",setTarget_HG:"HG",setTarget_SMG:"SMG",setTarget_RF:"RF",setTarget_AR:"AR",setTarget_MG:"MG",setTarget_SG:"SG",setTarget_2221:"",setTarget_Clear:"",MissionTableTitle:"",MissionTable_head_Mission:"",MissionTable_head_Manp:"",MissionTable_head_Ammu:"",MissionTable_head_Rati:"",MissionTable_head_Part:"",MissionTable_head_TPro:"",MissionTable_head_Equi:"",MissionTable_head_QPro:"",MissionTable_head_QRes:"",MissionTable_head_Time:"",PlanDetailsTitle:"",PlanDetails_Mission:"",PlanDetails_Manp:"",PlanDetails_Ammu:"",PlanDetails_Rati:"",PlanDetails_Part:"",PlanDetails_TPro:"",PlanDetails_Equi:"",PlanDetails_QPro:"",PlanDetails_QRes:"",PlanDetails_Time:"",savePlan:"",Capture:"",Saved_Title:"",NoSaved:"",start_sorting_html:' <span style="color:#165399"></span> ',permanentAddress:""},HTMLJS:{placeholder:{Config_importInput:"",Time_Anytime_hours:"",Time_Anytime_minutes:"",Tab_Anytime_MinimumIntervalTime_minutes:"",Time_Timetable_hours:"",Time_Timetable_minutes:"",Tab_Timetable_new_hours:"",Tab_Timetable_new_minutes:"",GreatSuccessRate:"",MT:"",AT:"",RT:"",PT:"",TT:"",ET:"",QPT:"",QRT:"",importSaved_input:""},title:{Config_importButton:"",Config_export:"",tab_Timetable_deleteall:"",Tab_Timetable_AddNewTimePoint:"",ChapterLimit:"",ContractWeight:"",Target_minus_100_MT:"100",Target_minus_10_MT:"10",Target_plus_10_MT:"10",Target_plus_100_MT:"100",Target_minus_100_AT:"100",Target_minus_10_AT:"10",Target_plus_10_AT:"10",Target_plus_100_AT:"100",Target_minus_100_RT:"100",Target_minus_10_RT:"10",Target_plus_10_RT:"10",Target_plus_100_RT:"100",Target_minus_100_PT:"100",Target_minus_10_PT:"10",Target_plus_10_PT:"10",Target_plus_100_PT:"100",Target_minus_1_TT:"1","Target_minus_0.1_TT":"0.1","Target_plus_0.1_TT":"0.1",Target_plus_1_TT:"1",Target_minus_1_ET:"1","Target_minus_0.1_ET":"0.1","Target_plus_0.1_ET":"0.1",Target_plus_1_ET:"1",Target_minus_1_QPT:"1","Target_minus_0.1_QPT":"0.1","Target_plus_0.1_QPT":"0.1",Target_plus_1_QPT:"1",Target_minus_1_QRT:"1","Target_minus_0.1_QRT":"0.1","Target_plus_0.1_QRT":"0.1",Target_plus_1_QRT:"1",importSaved_importButton:""},Demand_hour:"",Demand_total:"",Timetable_deletePoint:"",SavedTable_apply:"",SavedTable_name:"",SavedTable_rename:"",SavedTable_up:"",SavedTable_down:"",SavedTable_export:"",SavedTable_delete:"",FineTuning_minus:"",FineTuning_plus:""},JS:{Manp:"",Ammu:"",Rati:"",Part:"",TPro:"",Equi:"",QPro:"",QRes:"",FineTuningTool:"",TargetValue0_alert:"0",tab_Anytime_alert1:"0",tab_Timetable_alert1:"",tab_Timetable_alert2:"",tab_Timetable_alert3:"",tab_Timetable_alert4:"0",Mission:"",MinIntervalTime:"",NoPlan:"",NoMission:"",Time:"",PlanDetails_calculateMethod:"",total_time:"",total_greatSuccessRate:"",PerHour:"/h",Total:"",plzInputPlanName:"",planDefaultName:"",deleteSavedWarning_1:"",deleteSavedWarning_2:"",Saved_alert:"",config_alert:""}}},CAN_LOCALSTORAGE_WORK;window.onload=function(){checkLocalStorageWork(),setLanguage(),loadHTML_Target(),setPageByLocalStorage(),setQContract(Input_getTotalGreatSuccessRate(!0)),PrintMissionTable(),PrintPlanDetails(),loadHTML_language(),MobileOptimization(),document.getElementById("setTargetInput").clientWidth<=260&&disableTargetButton()},$(window).resize(function(){document.getElementById("setTargetInput").clientWidth<=260?disableTargetButton():enableTargetButton()}),$(function(){$("[data-toggle='tooltip']").tooltip()});var HTML_TAB=void 0,Tab_Timetable_TIMELIST=[];$(function(){$("#lang-zh-CN").on("click",function(){changeLanguage("zh-CN")}),$("#lang-zh-TW").on("click",function(){changeLanguage("zh-TW")})}),$(function(){$("#neverShowAgain_description").on("click",function(){storageSetItem("Description_Display",!1),document.getElementById("description").style.display="none"}),$("#neverShowAgain_localstorageWarning").on("click",function(){storageSetItem("LocalstorageWarning_Display",!1),document.getElementById("localstorageWarning").style.display="none"})});var IS_ChangeTabByJS=!1;$(function(){$("[href=#Tab_Anytime]").on("shown.bs.tab",function(){IS_ChangeTabByJS?IS_ChangeTabByJS=!1:ChangeTab_Anytime()}),$("[href=#Tab_Timetable]").on("shown.bs.tab",function(){IS_ChangeTabByJS?IS_ChangeTabByJS=!1:ChangeTab_Timetable()})}),$(function(){$("input[id^=Display_]").on("click",function(){is_CalculateByHour()?changeCalculateOutput_Hour():changeCalculateOutput_Total()}),$("#Display_PerHour_text").on("keyup",function(e){13==e.which&&(document.getElementById("Display_PerHour").checked=!0,changeCalculateOutput_Hour())}),$("#Display_Total_text").on("keyup",function(e){13==e.which&&(document.getElementById("Display_Total").checked=!0,changeCalculateOutput_Total())})}),$(function(){$("#GreatSuccessRate").on("input propertychange",function(){var e=Input_getGreatSuccessRate();Input_setGreatSuccessUpRate(IsGreatSuccessRateUp(),!1),setQContract(e+Input_getGreatSuccessUpRate(e)),PrintMissionTable(),PrintPlanDetails()}),$("#GreatSuccessRate").blur(function(){storageSetItem("GreatSuccessRate",Input_getGreatSuccessRate())}),$("#GreatSuccessRateUp").on("click",function(){var e=IsGreatSuccessRateUp();Input_setGreatSuccessUpRate(e),setQContract(Input_getTotalGreatSuccessRate(!0)),PrintMissionTable(),PrintPlanDetails(),storageSetItem("is_GreatSuccessRateUP",e)})}),$(function(){$("#ChapterLimit").on("change",function(){PrintMissionTable(),PrintPlanDetails(),storageSetItem("SelectChapter",Input_getSelectChapter())})}),$(function(){$("#Time_Anytime_hours").on("input propertychange",function(){if(!is_CalculateByHour()){var e=Input_getAnytimeTotalTime();TABLE_CALCULATE_TOTAL_TIME=e}PrintMissionTable(),PrintPlanDetails()}),$("#Time_Anytime_hours").blur(function(){Tab_Anytime_changeStorageCustom()}),$("#Time_Anytime_minutes").on("input propertychange",function(){if(!is_CalculateByHour()){var e=Input_getAnytimeTotalTime();TABLE_CALCULATE_TOTAL_TIME=e}PrintMissionTable(),PrintPlanDetails()}),$("#Time_Anytime_minutes").blur(function(){Tab_Anytime_changeStorageCustom()}),$("#Tab_Anytime_MinimumIntervalTime_minutes").on("input propertychange",function(){PrintMissionTable(),PrintPlanDetails()}),$("#Tab_Anytime_MinimumIntervalTime_minutes").blur(function(){Tab_Anytime_changeStorageCustom()})}),$(function(){$("#Time_Timetable_hours").on("input propertychange",function(){_Tab_Timetable_changeMaxTime()}),$("#Time_Timetable_hours").blur(function(){Tab_Timetable_changeStorageCustom()}),$("#Time_Timetable_minutes").on("input propertychange",function(){_Tab_Timetable_changeMaxTime()}),$("#Time_Timetable_minutes").blur(function(){Tab_Timetable_changeStorageCustom()}),$("#Tab_Timetable_new_hours").keyup(function(e){13==e.which&&$("#Tab_Timetable_new_minutes").focus()}),$("#Tab_Timetable_new_minutes").keyup(function(e){13==e.which&&(""!==$("#Tab_Timetable_new_hours").val()&&$("#Tab_Timetable_new_hours").focus(),Tab_Timetable_AddNew())}),$("#Tab_Timetable_AddNewTimePoint").on("click",function(){Tab_Timetable_AddNew()}),$("#Tab_Timetable_range").on("click","button[id^=Tab_Timetable_range_thumb_]",function(){Tab_Timetable_DeleteThisTimePoint(parseFloat(stringSliceFromLast_(this.id))),PrintMissionTable(),PrintPlanDetails(),Tab_Timetable_changeStorageCustom()}),$("#tab_Timetable_deleteall").on("click",function(){Tab_Timetable_DeleteAllTimePoint(),PrintMissionTable(),PrintPlanDetails(),Tab_Timetable_changeStorageCustom()})}),$(function(){$("#ContractWeight").change(function(){storageSetItem("ContractWeight",Input_getContractWeight())})}),$(function(){$("#target").on("click","button[id^=setTarget_]",function(){setTarget(stringSliceFromLast_(this.id))}),$("#target").on("click","button[id^=Target_minus_]",function(){ChangeTarget(this.id)}),$("#target").on("click","button[id^=Target_plus_]",function(){ChangeTarget(this.id)})}),$(function(){$("#target").on("blur","#MT",function(){TargetChangeStorage()}),$("#target").on("keyup","#MT",function(e){13==e.which&&$("#AT").focus()}),$("#target").on("blur","#AT",function(){TargetChangeStorage()}),$("#target").on("keyup","#AT",function(e){13==e.which&&$("#RT").focus()}),$("#target").on("blur","#RT",function(){TargetChangeStorage()}),$("#target").on("keyup","#RT",function(e){13==e.which&&$("#PT").focus()}),$("#target").on("blur","#PT",function(){TargetChangeStorage()}),$("#target").on("keyup","#PT",function(e){13==e.which&&$("#TT").focus()}),$("#target").on("blur","#TT",function(){TargetChangeStorage()}),$("#target").on("keyup","#TT",function(e){13==e.which&&$("#ET").focus()}),$("#target").on("blur","#ET",function(){TargetChangeStorage()}),$("#target").on("keyup","#ET",function(e){13==e.which&&$("#QPT").focus()}),$("#target").on("blur","#QPT",function(){TargetChangeStorage()}),$("#target").on("keyup","#QPT",function(e){13==e.which&&$("#QRT").focus()}),$("#target").on("blur","#QRT",function(){TargetChangeStorage()})}),$(function(){$("#start_sorting").on("click",function(){start_sorting_main()}),$("#clear_sorting").on("click",function(){delete_PlanTable(),HTML_AllowInput()})}),$(function(){$("#Plan_Table").on("shown.bs.collapse","#FineTuningTool",function(){IsMobile()||(document.getElementById("FineTuningTool").style.transition="")})}),$(function(){$("#Plan_Table").on("click","tr[id^=print_result_plan_tr_]",function(){_PlanSort(this)}),$("#Plan_Table").on("keyup","tr[id^=print_result_plan_tr_]",function(e){13==e.which&&_PlanSort(this)})}),$(function(){$("#Plan_Table").on("click","#resultPlan_Mission",function(){RESULT_PLAN_SORT_BY="Ranking",resultPlan_sortByColumn(0,"ascending")}),$("#Plan_Table").on("keyup","#resultPlan_Mission",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Ranking",resultPlan_sortByColumn(0,"ascending"))}),$("#Plan_Table").on("click","#resultPlan_Manp",function(){RESULT_PLAN_SORT_BY="Manp",resultPlan_sortByColumn(5)}),$("#Plan_Table").on("keyup","#resultPlan_Manp",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Manp",resultPlan_sortByColumn(5))}),$("#Plan_Table").on("click","#resultPlan_Ammu",function(){RESULT_PLAN_SORT_BY="Ammu",resultPlan_sortByColumn(6)}),$("#Plan_Table").on("keyup","#resultPlan_Ammu",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Ammu",resultPlan_sortByColumn(6))}),$("#Plan_Table").on("click","#resultPlan_Rati",function(){RESULT_PLAN_SORT_BY="Rati",resultPlan_sortByColumn(7)}),$("#Plan_Table").on("keyup","#resultPlan_Rati",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Rati",resultPlan_sortByColumn(7))}),$("#Plan_Table").on("click","#resultPlan_Part",function(){RESULT_PLAN_SORT_BY="Part",resultPlan_sortByColumn(8)}),$("#Plan_Table").on("keyup","#resultPlan_Part",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Part",resultPlan_sortByColumn(8))}),$("#Plan_Table").on("click","#resultPlan_TPro",function(){RESULT_PLAN_SORT_BY="TPro",resultPlan_sortByColumn(9)}),$("#Plan_Table").on("keyup","#resultPlan_TPro",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="TPro",resultPlan_sortByColumn(9))}),$("#Plan_Table").on("click","#resultPlan_Equi",function(){RESULT_PLAN_SORT_BY="Equi",resultPlan_sortByColumn(10)}),$("#Plan_Table").on("keyup","#resultPlan_Equi",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="Equi",resultPlan_sortByColumn(10))}),$("#Plan_Table").on("click","#resultPlan_QPro",function(){RESULT_PLAN_SORT_BY="QPro",resultPlan_sortByColumn(11)}),$("#Plan_Table").on("keyup","#resultPlan_QPro",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="QPro",resultPlan_sortByColumn(11))}),$("#Plan_Table").on("click","#resultPlan_QRes",function(){RESULT_PLAN_SORT_BY="QRes",resultPlan_sortByColumn(12)}),$("#Plan_Table").on("keyup","#resultPlan_QRes",function(e){13==e.which&&(RESULT_PLAN_SORT_BY="QRes",resultPlan_sortByColumn(12))})}),$(function(){$("#Plan_Table").on("click","button[id^=FineTuning_minus_]",function(){FineTuning(-1,stringSliceFromLast_(this.id))}),$("#Plan_Table").on("click","button[id^=FineTuning_plus_]",function(){FineTuning(1,stringSliceFromLast_(this.id))})}),$(function(){$("#Saved_heading").on("keyup",function(e){13==e.which&&($("#MissionTable_panel").collapse("hide"),$("#Saved").collapse("show"))}),$("#importSaved_importButton").on("click",function(){Saved_import($("#importSaved_input").val()),$("#importSaved_input").val("")}),$("#Saved_Body").on("click","button[id^=SavedTable_apply_]",function(){Saved_apply(parseInt(stringSliceFromLast_(this.id)))}),$("#Saved_Body").on("input propertychange","input[id^=SavedTable_name_]",function(){Saved_rename(parseInt(stringSliceFromLast_(this.id)))}),$("#Saved_Body").on("keyup","input[id^=SavedTable_name_]",function(e){if(13==e.which){var t="#"+this.id;$(t).attr("readOnly",!0)}}),$("#Saved_Body").on("blur","input[id^=SavedTable_name_]",function(){var e="#"+this.id;$(e).attr("readOnly",!0)}),$("#Saved_Body").on("click","button[id^=SavedTable_rename_]",function(){var e=parseInt(stringSliceFromLast_(this.id)),t="#SavedTable_name_"+e;$(t).attr("readOnly",!1),$(t).focus(),$(t).select()}),$("#Saved_Body").on("click","button[id^=SavedTable_up_]",function(){Saved_upThisRow(parseInt(stringSliceFromLast_(this.id)))}),$("#Saved_Body").on("click","button[id^=SavedTable_down_]",function(){Saved_downThisRow(parseInt(stringSliceFromLast_(this.id)))}),$("#Saved_Body").on("click","button[id^=SavedTable_export_]",function(){Saved_export(parseInt(stringSliceFromLast_(this.id)))}),$("#Saved_Body").on("click","button[id^=SavedTable_delete_]",function(){Saved_deleteThisRow(parseInt(stringSliceFromLast_(this.id)))})}),$(function(){$("#MissionTable_heading").on("keyup",function(e){13==e.which&&($("#MissionTable_panel").collapse("show"),$("#Saved").collapse("hide"))}),$("#MissionTable_head_Mission").on("click",function(){quick_sort_expand_ascending(MISSION_TABLE,12),PrintMissionTable(!1)}),$("#MissionTable_head_Mission").on("keyup",function(e){13==e.which&&(quick_sort_expand_ascending(MISSION_TABLE,12),PrintMissionTable(!1))}),$("#MissionTable_head_Manp").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,1),PrintMissionTable(!1)}),$("#MissionTable_head_Manp").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,1),PrintMissionTable(!1))}),$("#MissionTable_head_Ammu").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,2),PrintMissionTable(!1)}),$("#MissionTable_head_Ammu").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,2),PrintMissionTable(!1))}),$("#MissionTable_head_Rati").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,3),PrintMissionTable(!1)}),$("#MissionTable_head_Rati").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,3),PrintMissionTable(!1))}),$("#MissionTable_head_Part").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,4),PrintMissionTable(!1)}),$("#MissionTable_head_Part").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,4),PrintMissionTable(!1))}),$("#MissionTable_head_TPro").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,5),PrintMissionTable(!1)}),$("#MissionTable_head_TPro").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,5),PrintMissionTable(!1))}),$("#MissionTable_head_Equi").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,6),PrintMissionTable(!1)}),$("#MissionTable_head_Equi").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,6),PrintMissionTable(!1))}),$("#MissionTable_head_QPro").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,7),PrintMissionTable(!1)}),$("#MissionTable_head_QPro").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,7),PrintMissionTable(!1))}),$("#MissionTable_head_QRes").on("click",function(){quick_sort_expand_descending(MISSION_TABLE,8),PrintMissionTable(!1)}),$("#MissionTable_head_QRes").on("keyup",function(e){13==e.which&&(quick_sort_expand_descending(MISSION_TABLE,8),PrintMissionTable(!1))}),$("#MissionTable_head_Time").on("click",function(){quick_sort_expand_ascending(MISSION_TABLE,9),PrintMissionTable(!1)}),$("#MissionTable_head_Time").on("keyup",function(e){13==e.which&&(quick_sort_expand_ascending(MISSION_TABLE,9),PrintMissionTable(!1))}),$("#MissionTable_panel").on("click","tr[id^=MissionTable_]",function(){MissionTable_clickThisRow(this)}),$("#MissionTable_panel").on("keyup","tr[id^=MissionTable_]",function(e){13==e.which&&MissionTable_clickThisRow(this)})}),$(function(){$("#MissionTable_panel").on("shown.bs.collapse",function(){storageSetItem("IsSavedShow",!1)}),$("#MissionTable_panel").on("hidden.bs.collapse",function(){IsMobile()||(document.getElementById("MissionTable_panel").style.transition="")}),$("#Saved").on("shown.bs.collapse",function(){storageSetItem("IsSavedShow",!0),IsMobile()||(document.getElementById("Saved").style.transition="")})}),$(function(){$("#savePlan").on("click",function(){saveThisPlan()})}),$(function(){$("#Capture").on("click",function(){html2canvas(document.getElementById("PlanDetails"),{logging:!1,scale:1}).then(function(e){var t=document.createElement("a");t.href=e.toDataURL(),t.download="Capture.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})})}),$(function(){$("#Config_export").on("click",function(){Config_export()}),$("#Config_importButton").on("click",function(){setPageByImport($("#Config_importInput").val()),$("#Config_importInput").val("")})});var Q=[["0-1",0,145,145,0,0,0,0,0,50],["0-2",550,0,0,350,0,0,0,0,180],["0-3",900,900,900,250,0,0,0,0,720],["0-4",0,1200,800,750,0,0,0,0,1440],["1-1",10,30,15,0,0,0,0,0,15],["1-2",0,40,60,0,0,0,0,0,30],["1-3",30,0,30,10,0,0,0,0,60],["1-4",160,160,0,0,0,0,0,0,120],["2-1",100,0,0,30,0,0,0,0,40],["2-2",60,200,80,0,0,0,0,0,90],["2-3",10,10,10,230,0,0,0,0,240],["2-4",0,250,600,60,0,0,0,0,360],["3-1",50,0,75,0,0,0,0,0,20],["3-2",0,120,70,30,0,0,0,0,45],["3-3",0,300,0,0,0,0,0,0,90],["3-4",0,0,300,300,0,0,0,0,300],["4-1",0,185,185,0,0,0,0,0,60],["4-2",0,0,0,210,0,0,0,0,120],["4-3",800,550,0,0,0,0,0,0,360],["4-4",400,400,400,150,0,0,0,0,480],["5-1",0,0,100,45,0,0,0,0,30],["5-2",0,600,300,0,0,0,0,0,150],["5-3",800,400,400,0,0,0,0,0,240],["5-4",100,0,0,700,0,0,0,0,420],["6-1",300,300,0,100,0,0,0,0,120],["6-2",0,200,550,100,0,0,0,0,180],["6-3",0,0,200,500,0,0,0,0,300],["6-4",800,800,800,0,0,0,0,0,720],["7-1",650,0,650,0,0,0,0,0,150],["7-2",0,650,0,300,0,0,0,0,240],["7-3",900,600,600,0,0,0,0,0,330],["7-4",250,250,250,600,0,0,0,0,480],["8-1",150,150,150,0,0,0,0,0,60],["8-2",0,0,0,450,0,0,0,0,180],["8-3",400,800,800,0,0,0,0,0,360],["8-4",1500,400,400,100,0,0,0,0,540],["9-1",0,0,100,50,0,0,0,0,30],["9-2",180,0,180,100,0,0,0,0,90],["9-3",750,750,0,0,0,0,0,0,270],["9-4",500,900,900,0,0,0,0,0,420],["10-1",140,200,0,0,0,0,0,0,40],["10-2",0,240,180,0,0,0,0,0,100],["10-3",0,480,480,300,0,0,0,0,320],["10-4",660,660,660,330,0,0,0,0,600],["11-1",350,1050,0,0,0,0,0,0,240],["11-2",360,540,540,0,0,0,0,0,240],["11-3",0,750,1500,250,0,0,0,0,480],["11-4",0,1650,0,900,0,0,0,0,600],["12-1",0,220,220,0,0,0,0,0,60],["12-2",360,0,0,120,0,0,0,0,90],["12-3",800,1200,1200,0,0,0,0,0,540],["12-4",1800,0,1800,0,0,0,0,0,720]],Tab=function(){function e(){_classCallCheck(this,e),this._title='<thead><tr><th style="text-align: center;width:20%;" colspan="4" tabindex="0" id="resultPlan_Mission">'+language.JS.Mission+"</th>",this._titleEnd="</tr></thead>",this.Qvalid=[]}return _createClass(e,[{key:"setTime",value:function(){}},{key:"setValidQAndReturnLengthAndSetCurrentMax",value:function(){}},{key:"_setCurrentMax",value:function(){for(var e=new Array(8),t=0;t<8;t++){for(var a=new Array(this.Qvalid.length),n=0;n<this.Qvalid.length;n++)a[n]=this.Qvalid[n][t+1];quick_sort_descending(a),e[t]=a[0]+a[1]+a[2]+a[3]}this.CurrentValue_MAX=e}},{key:"normalizedQValid",value:function(){for(var e=0;e<this.Qvalid.length;e++)for(var t=0;t<8;t++)0!=this.CurrentValue_MAX[t]&&(this.Qvalid[e][t+1]/=this.CurrentValue_MAX[t])}},{key:"_getUnableLogistic",value:function(){var e=_setUnableLogistic();return this._setUnableLogisticCustomize(e)}},{key:"_setUnableLogisticCustomize",value:function(e){for(var t=0;t<Q.length;t++)Q[t][9]>this.TotalTime&&-1==e.indexOf(t)&&e.push(t);return e}},{key:"Calculate_Current",value:function(e){for(var t=new Array(8),a=this.Qvalid,n=0;n<8;n++)t[n]=a[e[0]][n+1]+a[e[1]][n+1]+a[e[2]][n+1]+a[e[3]][n+1];return t}},{key:"PrintPlanTableTitle",value:function(){}},{key:"PrintTableCustomize",value:function(e,t){return""}},{key:"Saved_Custom",value:function(){return[]}},{key:"ApplySaved_Custom",value:function(e){}}]),e}(),Tab_Anytime=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"setTime",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.TotalTime=Input_getAnytimeTotalTime(e),e&&0===this.TotalTime)throw alert(language.JS.tab_Anytime_alert1),HTML_AllowInput(),"--";this.MinimumIntervalTime=Input_getAnytimeMinimumIntervalTime(e)}},{key:"setValidQAndReturnLengthAndSetCurrentMax",value:function(){for(var e=this._getUnableLogistic(),t=0;t<Q.length;t++)if(-1==e.indexOf(t)){var a=[];a.push(Q[t][0]);for(var n=0;(++n+1)*Q[t][9]<=this.TotalTime;);for(var i=1;i<9;i++)a.push(Q[t][i]*n/this.TotalTime);a.push(Q[t][9]);for(var l=[],i=1;i<=n;i++)l.push(Q[t][9]*i);a.push(l),a.push(0),this.Qvalid.push(a)}return quick_sort_expand_ascending(this.Qvalid,9),this._setCurrentMax(),this.Qvalid.length}},{key:"_setUnableLogisticCustomize",value:function(e){for(var t=0;t<Q.length;t++)(Q[t][9]>this.TotalTime||Q[t][9]<this.MinimumIntervalTime)&&-1==e.indexOf(t)&&e.push(t);return e}},{key:"Calculate_Current",value:function(e){var t=this.Qvalid;if(this.MinimumIntervalTime){var a=[t[e[0]][9],t[e[1]][9],t[e[2]][9],t[e[3]][9]];if(Math.min(a[1]-a[0]==0?this.MinimumIntervalTime:a[1]-a[0],a[2]-a[1]==0?this.MinimumIntervalTime:a[2]-a[1],a[3]-a[2]==0?this.MinimumIntervalTime:a[3]-a[2])<this.MinimumIntervalTime)return[-1,-1,-1,-1,-1,-1,-1,-1];var n=[this.Qvalid[e[0]][10],this.Qvalid[e[1]][10],this.Qvalid[e[2]][10],this.Qvalid[e[3]][10]];if(this._calculateIntervalTimeMin(n)<this.MinimumIntervalTime)return[-1,-1,-1,-1,-1,-1,-1,-1]}for(var i=new Array(8),l=0;l<8;l++)i[l]=t[e[0]][l+1]+t[e[1]][l+1]+t[e[2]][l+1]+t[e[3]][l+1];return i}},{key:"_calculateIntervalTimeMin",value:function(e){for(var t=e,a=[t[0].length-1,t[1].length-1,t[2].length-1,t[3].length-1],n=0;n<3;n++)t[n][0]==t[n+1][0]&&(a[n+1]=-1);t[3][0]%t[2][0]==0?a[3]=-1:t[3][0]%t[1][0]==0?a[3]=-1:t[3][0]%t[0][0]==0&&(a[3]=-1),t[2][0]%t[1][0]==0?a[2]=-1:t[2][0]%t[0][0]==0&&(a[2]=-1),t[1][0]%t[0][0]==0&&(a[1]=-1);for(var i=t[0][0],l=999999999;-1!==a[0];){for(var r=0,s=0;++s<4;)-1!==a[s]&&(t[r][a[r]]<t[s][a[s]]?r=s:t[r][a[r]]===t[s][a[s]]&&a[s]--);var o=t[r][a[r]];a[r]--,i=Math.min(i,l-o),l=o}return i}},{key:"PrintPlanTableTitle",value:function(){return is_CalculateByHour()?this._title+'<th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Manp">'+language.JS.Manp+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Ammu">'+language.JS.Ammu+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Rati">'+language.JS.Rati+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Part">'+language.JS.Part+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_TPro">'+language.JS.TPro+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Equi">'+language.JS.Equi+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_QPro">'+language.JS.QPro+'/h</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_QRes">'+language.JS.QRes+'/h</th><th style="text-align: center;width:8.88%;">'+language.JS.MinIntervalTime+"</th>"+this._titleEnd:this._title+'<th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Manp">'+language.JS.Manp+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Ammu">'+language.JS.Ammu+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Rati">'+language.JS.Rati+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Part">'+language.JS.Part+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_TPro">'+language.JS.TPro+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_Equi">'+language.JS.Equi+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_QPro">'+language.JS.QPro+'</th><th style="text-align: center;width:8.88%;"tabindex="0" id="resultPlan_QRes">'+language.JS.QRes+'</th><th style="text-align: center;width:8.88%;">'+language.JS.MinIntervalTime+"</th>"+this._titleEnd}},{key:"PrintTableCustomize",value:function(e,t){var a=[],n=[e.List[t][0],e.List[t][1],e.List[t][2],e.List[t][3]],i=[this.Qvalid[n[0]][10],this.Qvalid[n[1]][10],this.Qvalid[n[2]][10],this.Qvalid[n[3]][10]];return a.push(this._calculateIntervalTimeMin(i)+"m"),a}},{key:"Saved_Custom",value:function(){var e=[],t=Input_getAnytimeTotalTime();e.push(t);var a=Input_getAnytimeMinimumIntervalTime();return e.push(a),e}},{key:"ApplySaved_Custom",value:function(e){var t=e[0],a=e[1];Input_setAnytimeTotalTime(t),Input_setAnytimeMinimumIntervalTime(a),storageSetItem("TabAnytimeCustom",e)}}]),t}(Tab),Tab_Timetable=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.Qvalid=[],e.TimeList=[],e}return _inherits(t,e),_createClass(t,[{key:"setTime",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.TimeList=Tab_Timetable_TIMELIST.slice().sort(sortNumber),this.TimeList.unshift(0),this.TotalTime=Input_getTimetableTotalTime(e),e&&0===this.TotalTime)throw alert(language.JS.tab_Timetable_alert4),HTML_AllowInput(),"--";this.TimeList.push(this.TotalTime)}},{key:"setValidQAndReturnLengthAndSetCurrentMax",value:function(){for(var e=this._getUnableLogistic(),t=0;t<Q.length;t++)if(-1===e.indexOf(t)){var a=[];a.push(Q[t][0]);for(var n=0,i=[],l=0,r=1;r<this.TimeList.length;r++)Q[t][9]<=this.TimeList[r]-this.TimeList[l]&&(n++,i.push(this.TimeList[l]+Q[t][9]),l=r);for(var r=1;r<9;r++)a.push(Q[t][r]*n/this.TotalTime);a.push(Q[t][9]),a.push(i),a.push(0),this.Qvalid.push(a)}return this._setCurrentMax(),this.Qvalid.length}},{key:"PrintPlanTableTitle",value:function(){return is_CalculateByHour()?this._title+'<th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Manp">'+language.JS.Manp+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Ammu">'+language.JS.Ammu+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Rati">'+language.JS.Rati+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Part">'+language.JS.Part+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_TPro">'+language.JS.TPro+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Equi">'+language.JS.Equi+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_QPro">'+language.JS.QPro+'/h</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_QRes">'+language.JS.QRes+"/h</th>"+this._titleEnd:this._title+'<th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Manp">'+language.JS.Manp+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Ammu">'+language.JS.Ammu+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Rati">'+language.JS.Rati+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Part">'+language.JS.Part+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_TPro">'+language.JS.TPro+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_Equi">'+language.JS.Equi+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_QPro">'+language.JS.QPro+'</th><th style="text-align: center;width:10%;"tabindex="0" id="resultPlan_QRes">'+language.JS.QRes+"</th>"+this._titleEnd}},{key:"Saved_Custom",value:function(){var e=[],t=Input_getTimetableTotalTime();e.push(t);var a=Tab_Timetable_TIMELIST.slice();return e.push(a),e}},{key:"ApplySaved_Custom",value:function(e){Input_setTimetableTotalTime(e[0]),Input_setTimetableTimetable(e[1]),storageSetItem("TabTimetableCustom",e)}}]),t}(Tab),Plan=function(){function e(t,a,n){if(_classCallCheck(this,e),this._setResourceIncreasingRate(),this._setList(a),this.ShownTab=t,this.CurrentValue_MAX=t.CurrentValue_MAX,void 0===n)this.TargetValue_html=Input_getTarget_Correct(),this.TargetValue=this._CorrectTargetValue();else{this.TargetValue=n,this.TargetValue_half=this.TargetValue.slice();for(var i=0;i<8;i++)this.TargetValue_half[i]=.5*this.TargetValue_half[i]}this._Norm_Target=this._getNorm(this.TargetValue)}return _createClass(e,[{key:"_setResourceIncreasingRate",value:function(){var e=Input_getTotalGreatSuccessRate(!0);this.ResourceIncreasingRate=1+e/200}},{key:"_setList",value:function(e){this.List=new Array(e);for(var t=0;t<e;t++)this.List[t]=new Array(12),this.List[t].Value=0}},{key:"_CorrectTargetValue",value:function(){var e=this._CorrectResourceValue(),t=this._CorrectContractValue(),a=e.concat(t);if("0,0,0,0,0,0,0,0"==a.toString())throw alert(language.JS.TargetValue0_alert),HTML_AllowInput(),"--";return a}},{key:"_CorrectResourceValue",value:function(){var e=this.TargetValue_html.slice(0,4),t=100-Input_getContractWeight();return this._ValuesNotAll0(e)&&this._CorrectValue(e,t),e}},{key:"_CorrectContractValue",value:function(){var e=this.TargetValue_html.slice(4,8),t=Input_getContractWeight();return this._ValuesNotAll0(e)&&this._CorrectValue(e,t),e}},{key:"_ValuesNotAll0",value:function(e){for(var t=0;t<e.length;t++)if(0!=e[t])return!0;return!1}},{key:"_CorrectValue",value:function(e,t){for(var a=t/ArrayMax(e),n=0;n<e.length;n++)e[n]*=a}},{key:"_getNorm",value:function(e){for(var t=0,a=0;a<e.length;a++)t+=Math.pow(e[a],2);return Math.pow(t,.5)}},{key:"CalculateAndPush_Standardization_And_CalculateMissionsValue",value:function(e){this._CurrentValue=this.ShownTab.Calculate_Current(e),-1!==this._CurrentValue[0]&&(this._MissionsNumber=e,this._PlanValue=this._calculateValue(),this.ShownTab.Qvalid[e[0]][11]+=this._PlanValue,this.ShownTab.Qvalid[e[1]][11]+=this._PlanValue,this.ShownTab.Qvalid[e[2]][11]+=this._PlanValue,this.ShownTab.Qvalid[e[3]][11]+=this._PlanValue,0 in this.List[this.List.length-1]?this._push():this._push_FirstEmptyRow())}},{key:"CalculateAndPush_Standardization",value:function(e){this._CurrentValue=this.ShownTab.Calculate_Current(e),-1!==this._CurrentValue[0]&&(this._MissionsNumber=e,this._PlanValue=this._calculateValue(),0 in this.List[this.List.length-1]?this._push():this._push_FirstEmptyRow())}},{key:"CalculateAndPush",value:function(e){if(this._CurrentValue=this.ShownTab.Calculate_Current(e),-1!==this._CurrentValue[0]){for(var t=0;t<8;t++)if(this._CurrentValue[t]<this.TargetValue_half[t])return;this._MissionsNumber=e,this._PlanValue=this._calculateValue_2(),0 in this.List[this.List.length-1]?this._push():this._push_FirstEmptyRow()}}},{key:"_push_FirstEmptyRow",value:function(){for(var e=this.List.length-1;0!=e&&!(0 in this.List[e-1]);)e--;this._PushIntoThisRow(e),this._SortListByValue(e)}},{key:"_push",value:function(){this._thisPlanIsBetterThan(this.List.length-1)&&(this._PushIntoThisRow(this.List.length-1),this._SortListByValue(this.List.length-1))}},{key:"_PushIntoThisRow",value:function(e){this.List[e]=this._MissionsNumber.concat(this._CurrentValue),this.List[e].Value=this._PlanValue}},{key:"_SortListByValue",value:function(e){for(var t=e-1;t>=0&&this._thisPlanIsBetterThan(t);t--)this._ExchangeTheseTwoRows(t)}},{key:"_ExchangeTheseTwoRows",value:function(e){this.List[e+1]=this.List[e].slice(),this.List[e+1].Value=this.List[e].Value,this._PushIntoThisRow(e)}},{key:"_thisPlanIsBetterThan",value:function(e){return this._PlanValue>this.List[e].Value}},{key:"_calculateValue",value:function(){var e=[0,0,0,0,0,0,0,0],t=this.TargetValue,a=this._CurrentValue;0!==t[0]&&(e[0]=a[0]),0!==t[1]&&(e[1]=a[1]),0!==t[2]&&(e[2]=a[2]),0!==t[3]&&(e[3]=a[3]),0!==t[4]&&(e[4]=500*a[4]),0!==t[5]&&(e[5]=500*a[5]),0!==t[6]&&(e[6]=500*a[6]),0!==t[7]&&(e[7]=500*a[7]);var n=this._getNorm(e);if(0===n)return 0;var i=this._getDotProduct(e,this.TargetValue),l=i/this._Norm_Target,r=Math.min(1,l/n),s=Math.acos(r),o=1-2*s/Math.PI;return l*Math.pow(o,2)}},{key:"_getDotProduct",value:function(e,t){if(e.length!==t.length)throw"getDotProduct error";for(var a=0,n=0;n<e.length;n++)a+=e[n]*t[n];return a}},{key:"_calculateValue_2",value:function(){return Value2(this.TargetValue,this._CurrentValue)}},{key:"print",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ranking";if(!(0 in this.List[0])){throw document.getElementById("Plan_Table").innerHTML=language.JS.NoPlan,RESULT_PLAN=[],"--"}for(var a=[],n=0;n<this.List.length&&0 in this.List[n];n++){var i=[];i.push(n);for(var l=new Array(4),r=0;r<4;r++)l[r]=this.ShownTab.Qvalid[this.List[n][r]][0];l=l.sort(sortStringNumber);for(var r=0;r<4;r++)i.push(l[r]);for(var r=0;r<4;r++)i.push(this.List[n][r+4]*this.ResourceIncreasingRate*this.CurrentValue_MAX[r]);for(var r=4;r<8;r++)i.push(this.List[n][r+4]*this.CurrentValue_MAX[r]);for(var s=this.ShownTab.PrintTableCustomize(this,n),r=0;r<s.length;r++)i.push(s[r]);a.push(i)}var o;switch(o=is_CalculateByHour()?60:this.ShownTab.TotalTime,t){case"Ranking":RESULT_PLAN_SORT_BY="Ranking";break;case"Manp":quick_sort_expand_descending(a,5),RESULT_PLAN_SORT_BY="Manp";break;case"Ammu":quick_sort_expand_descending(a,6),RESULT_PLAN_SORT_BY="Ammu";break;case"Rati":quick_sort_expand_descending(a,7),RESULT_PLAN_SORT_BY="Rati";break;case"Part":quick_sort_expand_descending(a,8),RESULT_PLAN_SORT_BY="Part";break;case"TPro":quick_sort_expand_descending(a,9),RESULT_PLAN_SORT_BY="TPro";break;case"Equi":quick_sort_expand_descending(a,10),RESULT_PLAN_SORT_BY="Equi";break;case"QPro":quick_sort_expand_descending(a,11),RESULT_PLAN_SORT_BY="QPro";break;case"QRes":quick_sort_expand_descending(a,12),RESULT_PLAN_SORT_BY="QRes"}RESULT_PLAN=a,print_result_plan(e,a,o)}}]),e}(),RESULT_PLAN=[],RESULT_PLAN_SORT_BY="",TABLE_CALCULATE_TOTAL_TIME=void 0,FineTuning_TargetValue_Original=new Array(8),FineTuning_TargetValue=new Array(8),FineTuning_ShownTab=void 0,MISSION_TABLE=[],MISSION_TABLE_SELECT=[],Chart,SAVED=[];